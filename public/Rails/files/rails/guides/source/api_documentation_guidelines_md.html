<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>api_documentation_guidelines.md</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../../../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../../css/github.css" type="text/css" media="screen" />
<script src="../../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            api_documentation_guidelines.md
        </h1>
        <ul class="files">
            <li>rails/guides/source/api_documentation_guidelines.md</li>
            <li>Last modified: 2013-04-26 19:46:46 +0300</li>
        </ul>
    </div>

    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<h1 id="label-API+Documentation+Guidelines">API Documentation Guidelines</h1>

<p>This guide documents the Ruby on <a
href="../../../../classes/Rails.html">Rails</a> API documentation
guidelines.</p>

<p>After reading this guide, you will know:</p>
<ul><li>
<p>How to write effective prose for documentation purposes.</p>
</li><li>
<p>Style guidelines for documenting different kinds of Ruby code.</p>
</li></ul>
<hr style="height: 1px">

<h2 id="label-RDoc">RDoc</h2>

<p>The <a href="../../../../classes/Rails.html">Rails</a> API documentation is
generated with RDoc. Please consult the documentation for help with the <a
href="http://rdoc.rubyforge.org/RDoc/Markup.html">markup</a>, and also take
into account these <a
href="http://rdoc.rubyforge.org/RDoc/Parser/Ruby.html">additional
directives</a>.</p>

<h2 id="label-Wording">Wording</h2>

<p>Write simple, declarative sentences. Brevity is a plus: get to the point.</p>

<p>Write in present tense: “Returns a hash that…”, rather than “Returned a
hash that…” or “Will return a hash that…”.</p>

<p>Start comments in upper case. Follow regular punctuation rules:</p>

<pre><code># Declares an attribute reader backed by an internally-named 
# instance variable.
def attr_internal_reader(*attrs)
  ...
end
</code></pre>

<p>Communicate to the reader the current way of doing things, both explicitly
and implicitly. Use the idioms recommended in edge. Reorder sections to
emphasize favored approaches if needed, etc. The documentation should be a
model for best practices and canonical, modern <a
href="../../../../classes/Rails.html">Rails</a> usage.</p>

<p>Documentation has to be concise but comprehensive. Explore and document
edge cases. What happens if a module is anonymous? What if a collection is
empty? What if an argument is nil?</p>

<p>The proper names of <a href="../../../../classes/Rails.html">Rails</a>
components have a space in between the words, like “Active Support”.
<code>ActiveRecord</code> is a Ruby module, whereas Active Record is an
ORM. All <a href="../../../../classes/Rails.html">Rails</a> documentation
should consistently refer to <a
href="../../../../classes/Rails.html">Rails</a> components by their proper
name, and if in your next blog post or presentation you remember this
tidbit and take it into account that&#39;d be phenomenal.</p>

<p>Spell names correctly: <a href="../../../../classes/Arel.html">Arel</a>,
Test::Unit, RSpec, <a href="../../../../classes/HTML.html">HTML</a>, MySQL,
JavaScript, <a href="../../../../classes/ERB.html">ERB</a>. When in doubt,
please have a look at some authoritative source like their official
documentation.</p>

<p>Use the article “an” for “SQL”, as in “an SQL statement”. Also “an SQLite
database”.</p>

<h2 id="label-English">English</h2>

<p>Please use American English (<em>color</em>, <em>center</em>,
<em>modularize</em>, etc).. See <a
href="http://en.wikipedia.org/wiki/American_and_British_English_spelling_differences">a
list of American and British English spelling differences here</a>.</p>

<h2 id="label-Example+Code">Example Code</h2>

<p>Choose meaningful examples that depict and cover the basics as well as
interesting points or gotchas.</p>

<p>Use two spaces to indent chunks of code–that is, for markup purposes, two
spaces with respect to the left margin. The examples themselves should use
<a
href="http://contributing_to_ruby_on_rails.html#follow-the-coding-conventions">Rails
coding conventions</a>.</p>

<p>Short docs do not need an explicit “Examples” label to introduce snippets;
they just follow paragraphs:</p>

<pre><code># Converts a collection of elements into a formatted string by 
# calling +to_s+ on all elements and joining them.
#
#   Blog.all.to_formatted_s # =&gt; &quot;First PostSecond PostThird Post&quot;
</code></pre>

<p>On the other hand, big chunks of structured documentation may have a
separate “Examples” section:</p>

<pre><code># ==== Examples
#
#   Person.exists?(5)
#   Person.exists?(&#39;5&#39;)
#   Person.exists?(name: &quot;David&quot;)
#   Person.exists?([&#39;name LIKE ?&#39;, &quot;%#{query}%&quot;])
</code></pre>

<p>The results of expressions follow them and are introduced by “# =&gt; ”,
vertically aligned:</p>

<pre><code># For checking if a fixnum is even or odd.
#
#   1.even? # =&gt; false
#   1.odd?  # =&gt; true
#   2.even? # =&gt; true
#   2.odd?  # =&gt; false
</code></pre>

<p>If a line is too long, the comment may be placed on the next line:</p>

<pre><code>#   label(:post, :title)
#   # =&gt; &lt;label for=&quot;post_title&quot;&gt;Title&lt;/label&gt;
#
#   label(:post, :title, &quot;A short title&quot;)
#   # =&gt; &lt;label for=&quot;post_title&quot;&gt;A short title&lt;/label&gt;
#
#   label(:post, :title, &quot;A short title&quot;, class: &quot;title_label&quot;)
#   # =&gt; &lt;label for=&quot;post_title&quot; class=&quot;title_label&quot;&gt;A short title&lt;/label&gt;
</code></pre>

<p>Avoid using any printing methods like <code>puts</code> or <code>p</code>
for that purpose.</p>

<p>On the other hand, regular comments do not use an arrow:</p>

<pre><code>#   polymorphic_url(record)  # same as comment_url(record)
</code></pre>

<h2 id="label-Filenames">Filenames</h2>

<p>As a rule of thumb, use filenames relative to the application root:</p>

<pre><code>config/routes.rb            # YES
routes.rb                   # NO
RAILS_ROOT/config/routes.rb # NO</code></pre>

<h2 id="label-Fonts">Fonts</h2>

<h3 id="label-Fixed-width+Font">Fixed-width Font</h3>

<p>Use fixed-width fonts for:</p>
<ul><li>
<p>Constants, in particular class and module names.</p>
</li><li>
<p>Method names.</p>
</li><li>
<p>Literals like <code>nil</code>, <code>false</code>, <code>true</code>,
<code>self</code>.</p>
</li><li>
<p>Symbols.</p>
</li><li>
<p>Method parameters.</p>
</li><li>
<p><a href="../../../../classes/File.html">File</a> names.</p>
</li></ul>

<pre><code>class Array
  # Calls +to_param+ on all its elements and joins the result with
  # slashes. This is used by +url_for+ in Action Pack.
  def to_param
    collect { |e| e.to_param }.join &#39;/&#39;
  end
end
</code></pre>

<p>WARNING: Using a pair of <code>...</code> for fixed-width font only works
with <strong>words</strong>; that is: anything matching
<code>\A\w+\z</code>. For anything else use <code>...</code>, notably
symbols, setters, inline snippets, etc.</p>

<h3 id="label-Regular+Font">Regular Font</h3>

<p>When “true” and “false” are English words rather than Ruby keywords use a
regular font:</p>

<pre><code># Runs all the validations within the specified context.
# Returns true if no errors are found, false otherwise.
#
# If the argument is false (default is +nil+), the context is
# set to &lt;tt&gt;:create&lt;/tt&gt; if &lt;tt&gt;new_record?&lt;/tt&gt; is true,
# and to &lt;tt&gt;:update&lt;/tt&gt; if it is not.
#
# Validations with no &lt;tt&gt;:on&lt;/tt&gt; option will run no
# matter the context. Validations with # some &lt;tt&gt;:on&lt;/tt&gt;
# option will only run in the specified context.
def valid?(context = nil)
  ...
end
</code></pre>

<h2 id="label-Description+Lists">Description Lists</h2>

<p>In lists of options, parameters, etc. use a hyphen between the item and its
description (reads better than a colon because normally options are
symbols):</p>

<pre><code># * &lt;tt&gt;:allow_nil&lt;/tt&gt; - Skip validation if attribute is +nil+.
</code></pre>

<p>The description starts in upper case and ends with a full stop—it&#39;s
standard English.</p>

<h2 id="label-Dynamically+Generated+Methods">Dynamically Generated Methods</h2>

<p>Methods created with <code>(module|class)_eval(STRING)</code> have a
comment by their side with an instance of the generated code. That comment
is 2 spaces away from the template:</p>

<pre><code>for severity in Severity.constants
  class_eval &lt;&lt;-EOT, __FILE__, __LINE__
    def #{severity.downcase}(message = nil, progname = nil, &amp;block)  # def debug(message = nil, progname = nil, &amp;block)
      add(#{severity}, message, progname, &amp;block)                    #   add(DEBUG, message, progname, &amp;block)
    end                                                              # end
                                                                     #
    def #{severity.downcase}?                                        # def debug?
      #{severity} &gt;= @level                                          #   DEBUG &gt;= @level
    end                                                              # end
  EOT
end
</code></pre>

<p>If the resulting lines are too wide, say 200 columns or more, put the
comment above the call:</p>

<pre><code># def self.find_by_login_and_activated(*args)
#   options = args.extract_options!
#   ...
# end
self.class_eval %{
  def self.#{method_id}(*args)
    options = args.extract_options!
    ...
  end
}
</code></pre>

    </div>
  


  


  
  


  


  

  



  

    

    

    


    


    <!-- Methods -->
              </div>

    </div>
  </body>
</html>