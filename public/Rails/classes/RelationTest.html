<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>RelationTest</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/github.css" type="text/css" media="screen" />
<script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            RelationTest 
            
                <span class="parent">&lt; 
                    
                    ActiveRecord::TestCase
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/rails/activerecord/test/cases/relations_test_rb.html">rails/activerecord/test/cases/relations_test.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  


  


  
  


  
    <!-- Namespace -->
    <div class="sectiontitle">Namespace</div>
    <ul>
      
        <li>
          <span class="type">CLASS</span>
          <a href="RelationTest/Mary.html">RelationTest::Mary</a>
        </li>
      
        <li>
          <span class="type">CLASS</span>
          <a href="RelationTest/OMGTopic.html">RelationTest::OMGTopic</a>
        </li>
      
    </ul>
  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>A</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-author">author</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-respond_to-3F">respond_to?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-test_anonymous_extension">test_anonymous_extension</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_any">test_any</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_automatically_added_having_references">test_automatically_added_having_references</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_automatically_added_order_references">test_automatically_added_order_references</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_automatically_added_where_references">test_automatically_added_where_references</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_bind_values">test_bind_values</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_blank_like_arguments_to_query_methods_dont_raise_errors">test_blank_like_arguments_to_query_methods_dont_raise_errors</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_build">test_build</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_count">test_count</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_count_complex_chained_relations">test_count_complex_chained_relations</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_count_explicit_columns">test_count_explicit_columns</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_count_with_distinct">test_count_with_distinct</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_create">test_create</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_create_bang">test_create_bang</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_order_with_scope_order">test_default_scope_order_with_scope_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_with_conditions_hash">test_default_scope_with_conditions_hash</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_with_conditions_string">test_default_scope_with_conditions_string</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scoping_finder_methods">test_default_scoping_finder_methods</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_delete_all">test_delete_all</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_delete_all_limit_error">test_delete_all_limit_error</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_delete_all_loaded">test_delete_all_loaded</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_destroy_all">test_destroy_all</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_do_not_double_quote_string_id">test_do_not_double_quote_string_id</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_do_not_double_quote_string_id_with_array">test_do_not_double_quote_string_id_with_array</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dynamic_find_by_attributes">test_dynamic_find_by_attributes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dynamic_find_by_attributes_bang">test_dynamic_find_by_attributes_bang</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dynamic_finder">test_dynamic_finder</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_eager_association_loading_of_stis_with_multiple_references">test_eager_association_loading_of_stis_with_multiple_references</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_eager_loading_with_conditions_on_joins">test_eager_loading_with_conditions_on_joins</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_empty">test_empty</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_empty_complex_chained_relations">test_empty_complex_chained_relations</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_empty_with_zero_limit">test_empty_with_zero_limit</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_except">test_except</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_exists">test_exists</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_explicit_create_scope">test_explicit_create_scope</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all_using_where_twice_should_or_the_relation">test_find_all_using_where_twice_should_or_the_relation</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all_using_where_with_relation">test_find_all_using_where_with_relation</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all_using_where_with_relation_and_alternate_primary_key">test_find_all_using_where_with_relation_and_alternate_primary_key</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all_using_where_with_relation_does_not_alter_select_values">test_find_all_using_where_with_relation_does_not_alter_select_values</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all_using_where_with_relation_with_joins">test_find_all_using_where_with_relation_with_joins</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all_using_where_with_relation_with_select_to_build_subquery">test_find_all_using_where_with_relation_with_select_to_build_subquery</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all_with_join">test_find_all_with_join</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all_with_multiple_should_use_and">test_find_all_with_multiple_should_use_and</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_by_classname">test_find_by_classname</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_by_id_with_list_of_ar">test_find_by_id_with_list_of_ar</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_id">test_find_id</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_ids">test_find_ids</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_in_empty_array">test_find_in_empty_array</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_on_hash_conditions">test_find_on_hash_conditions</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_or_create_by">test_find_or_create_by</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_or_create_by-21">test_find_or_create_by!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_or_create_by_with_create_with">test_find_or_create_by_with_create_with</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_or_initialize_by">test_find_or_initialize_by</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_with_included_associations">test_find_with_included_associations</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_with_list_of_ar">test_find_with_list_of_ar</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_with_preloaded_associations">test_find_with_preloaded_associations</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_with_readonly_option">test_find_with_readonly_option</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_last_with_arel_order">test_finding_last_with_arel_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_arel_order">test_finding_with_arel_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_assoc_order">test_finding_with_assoc_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_complex_order">test_finding_with_complex_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_complex_order_and_limit">test_finding_with_complex_order_and_limit</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_conditions">test_finding_with_conditions</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_cross_table_order_and_limit">test_finding_with_cross_table_order_and_limit</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_group">test_finding_with_group</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_hash_conditions_on_joined_table">test_finding_with_hash_conditions_on_joined_table</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_order">test_finding_with_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_order_and_take">test_finding_with_order_and_take</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_order_concatenated">test_finding_with_order_concatenated</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_order_limit_and_offset">test_finding_with_order_limit_and_offset</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_reorder">test_finding_with_reorder</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_reverted_assoc_order">test_finding_with_reverted_assoc_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_subquery">test_finding_with_subquery</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_or_create">test_first_or_create</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_or_create_bang_with_invalid_block">test_first_or_create_bang_with_invalid_block</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_or_create_bang_with_invalid_options">test_first_or_create_bang_with_invalid_options</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_or_create_bang_with_no_parameters">test_first_or_create_bang_with_no_parameters</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_or_create_bang_with_valid_block">test_first_or_create_bang_with_valid_block</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_or_create_bang_with_valid_options">test_first_or_create_bang_with_valid_options</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_or_create_with_array">test_first_or_create_with_array</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_or_create_with_block">test_first_or_create_with_block</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_or_create_with_invalid_array">test_first_or_create_with_invalid_array</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_or_create_with_no_parameters">test_first_or_create_with_no_parameters</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_or_create_with_valid_array">test_first_or_create_with_valid_array</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_or_initialize">test_first_or_initialize</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_or_initialize_with_block">test_first_or_initialize_with_block</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_or_initialize_with_no_parameters">test_first_or_initialize_with_no_parameters</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_intersection_with_array">test_intersection_with_array</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_joins_with_nil_argument">test_joins_with_nil_argument</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_joins_with_string_array">test_joins_with_string_array</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_last">test_last</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_loaded_all">test_loaded_all</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_loaded_first">test_loaded_first</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_loading_with_one_association">test_loading_with_one_association</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_loading_with_one_association_with_non_preload">test_loading_with_one_association_with_non_preload</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_many">test_many</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_many_with_limits">test_many_with_limits</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_multi_where_ands_queries">test_multi_where_ands_queries</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_multiple_selects">test_multiple_selects</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_multivalue_where">test_multivalue_where</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_named_extension">test_named_extension</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_no_arguments_to_query_methods_raise_errors">test_no_arguments_to_query_methods_raise_errors</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_none">test_none</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_none_chainable">test_none_chainable</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_none_chainable_to_existing_scope_extension_method">test_none_chainable_to_existing_scope_extension_method</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_none_chained_to_methods_firing_queries_straight_to_db">test_none_chained_to_methods_firing_queries_straight_to_db</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_null_relation_calculations_methods">test_null_relation_calculations_methods</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_null_relation_content_size_methods">test_null_relation_content_size_methods</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_null_relation_metadata_methods">test_null_relation_metadata_methods</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_only">test_only</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_order_by_relation_attribute">test_order_by_relation_attribute</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_order_using_scoping">test_order_using_scoping</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_ordering_with_extra_spaces">test_ordering_with_extra_spaces</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_preload_applies_to_all_chained_preloaded_scopes">test_preload_applies_to_all_chained_preloaded_scopes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_presence">test_presence</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_primary_key">test_primary_key</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_raising_exception_on_invalid_hash_params">test_raising_exception_on_invalid_hash_params</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_references_doesnt_trigger_eager_loading_if_reference_not_included">test_references_doesnt_trigger_eager_loading_if_reference_not_included</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_references_triggers_eager_loading">test_references_triggers_eager_loading</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_relation_merging">test_relation_merging</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_relation_merging_with_arel_equalities_keeps_last_equality">test_relation_merging_with_arel_equalities_keeps_last_equality</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_relation_merging_with_arel_equalities_keeps_last_equality_with_non_attribute_left_hand">test_relation_merging_with_arel_equalities_keeps_last_equality_with_non_attribute_left_hand</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_relation_merging_with_association">test_relation_merging_with_association</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_relation_merging_with_eager_load">test_relation_merging_with_eager_load</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_relation_merging_with_joins">test_relation_merging_with_joins</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_relation_merging_with_locks">test_relation_merging_with_locks</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_relation_merging_with_preload">test_relation_merging_with_preload</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_reload">test_reload</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_respond_to_class_methods_and_scopes">test_respond_to_class_methods_and_scopes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_respond_to_delegates_to_relation">test_respond_to_delegates_to_relation</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_respond_to_dynamic_finders">test_respond_to_dynamic_finders</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scoped">test_scoped</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scoped_all">test_scoped_all</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scoped_build">test_scoped_build</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scoped_first">test_scoped_first</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scoped_responds_to_delegated_methods">test_scoped_responds_to_delegated_methods</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_select_argument_error">test_select_argument_error</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_select_takes_a_variable_list_of_args">test_select_takes_a_variable_list_of_args</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_select_with_block">test_select_with_block</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_size">test_size</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_size_with_limit">test_size_with_limit</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_size_with_zero_limit">test_size_with_zero_limit</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_to_json">test_to_json</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_to_xml">test_to_xml</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_to_yaml">test_to_yaml</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_two_scopes_with_includes_should_not_drop_any_include">test_two_scopes_with_includes_should_not_drop_any_include</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_uniq">test_uniq</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_unscoped_block_style">test_unscoped_block_style</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_update_all_with_blank_argument">test_update_all_with_blank_argument</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_update_all_with_joins">test_update_all_with_joins</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_update_all_with_joins_and_limit">test_update_all_with_joins_and_limit</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_update_all_with_joins_and_limit_and_order">test_update_all_with_joins_and_limit_and_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_update_all_with_joins_and_offset">test_update_all_with_joins_and_offset</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_update_all_with_joins_and_offset_and_order">test_update_all_with_joins_and_offset_and_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_where_with_ar_object">test_where_with_ar_object</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    


    <!-- Methods -->
        
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-author">
            
              <b>author</b>()
            
            <a href="../classes/RelationTest.html#method-i-author" name="method-i-author" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-author_source')" id="l_method-i-author_source">show</a>
                
              </p>
              <div id="method-i-author_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1149</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">author</span>
  <span class="ruby-string">&#39;lifo&#39;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-respond_to-3F">
            
              <b>respond_to?</b>(method, access = false)
            
            <a href="../classes/RelationTest.html#method-i-respond_to-3F" name="method-i-respond_to-3F" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-respond_to-3F_source')" id="l_method-i-respond_to-3F_source">show</a>
                
              </p>
              <div id="method-i-respond_to-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 351</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">respond_to?</span> <span class="ruby-identifier">method</span>, <span class="ruby-identifier">access</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">responds</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">method</span>, <span class="ruby-identifier">access</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_anonymous_extension">
            
              <b>test_anonymous_extension</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_anonymous_extension" name="method-i-test_anonymous_extension" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_anonymous_extension_source')" id="l_method-i-test_anonymous_extension_source">show</a>
                
              </p>
              <div id="method-i-test_anonymous_extension_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1147</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_anonymous_extension</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:author_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id ASC&#39;</span>).<span class="ruby-identifier">extending</span> <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">author</span>
      <span class="ruby-string">&#39;lifo&#39;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;lifo&quot;</span>, <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">author</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;lifo&quot;</span>, <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">author</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_any">
            
              <b>test_any</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_any" name="method-i-test_any" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_any_source')" id="l_method-i-test_any_source">show</a>
                
              </p>
              <div id="method-i-test_any_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 883</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_any</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-comment"># This test was failing when run on its own (as opposed to running the entire suite).</span>
  <span class="ruby-comment"># The second line in the assert_queries block was causing visit_Arel_Attributes_Attribute</span>
  <span class="ruby-comment"># in Arel::Visitors::ToSql to trigger a SHOW TABLES query. Running that line here causes</span>
  <span class="ruby-comment"># the SHOW TABLES result to be cached so we don&#39;t have to do it again in the block.</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># This is obviously a rubbish fix but it&#39;s the best I can come up with for now...</span>
  <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>).<span class="ruby-identifier">any?</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">3</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">any?</span> <span class="ruby-comment"># Uses COUNT()</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>).<span class="ruby-identifier">any?</span>

    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">any?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span> }
    <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">any?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-number">0</span> }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_automatically_added_having_references">
            
              <b>test_automatically_added_having_references</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_automatically_added_having_references" name="method-i-test_automatically_added_having_references" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_automatically_added_having_references_source')" id="l_method-i-test_automatically_added_having_references_source">show</a>
                
              </p>
              <div id="method-i-test_automatically_added_having_references_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1300</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_automatically_added_having_references</span>
  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">having</span>(<span class="ruby-value">:comments</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Bla&quot;</span> })
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;comments&#39;</span>], <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">references_values</span>

  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">having</span>(<span class="ruby-string">&#39;comments.body&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Bla&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;comments&#39;</span>], <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">references_values</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_automatically_added_order_references">
            
              <b>test_automatically_added_order_references</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_automatically_added_order_references" name="method-i-test_automatically_added_order_references" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_automatically_added_order_references_source')" id="l_method-i-test_automatically_added_order_references_source">show</a>
                
              </p>
              <div id="method-i-test_automatically_added_order_references_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1308</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_automatically_added_order_references</span>
  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;comments.body&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;comments&#39;</span>], <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">references_values</span>

  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;comments.body&#39;</span>, <span class="ruby-string">&#39;yaks.body&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;comments&#39;</span>, <span class="ruby-string">&#39;yaks&#39;</span>], <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">references_values</span>

  <span class="ruby-comment"># Don&#39;t infer yaks, let&#39;s not go down that road again...</span>
  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;comments.body, yaks.body&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;comments&#39;</span>], <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">references_values</span>

  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;comments.body asc&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;comments&#39;</span>], <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">references_values</span>

  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;foo(comments.body)&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">references_values</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_automatically_added_where_references">
            
              <b>test_automatically_added_where_references</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_automatically_added_where_references" name="method-i-test_automatically_added_where_references" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_automatically_added_where_references_source')" id="l_method-i-test_automatically_added_where_references_source">show</a>
                
              </p>
              <div id="method-i-test_automatically_added_where_references_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1292</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_automatically_added_where_references</span>
  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:comments</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Bla&quot;</span> })
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;comments&#39;</span>], <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">references_values</span>

  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;comments.body&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Bla&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;comments&#39;</span>], <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">references_values</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_bind_values">
            
              <b>test_bind_values</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_bind_values" name="method-i-test_bind_values" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_bind_values_source')" id="l_method-i-test_bind_values_source">show</a>
                
              </p>
              <div id="method-i-test_bind_values_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 35</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_bind_values</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>
  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">bind_values</span>

  <span class="ruby-identifier">relation2</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">bind</span> <span class="ruby-string">&#39;foo&#39;</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w{ foo }</span>, <span class="ruby-identifier">relation2</span>.<span class="ruby-identifier">bind_values</span>
  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">bind_values</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_blank_like_arguments_to_query_methods_dont_raise_errors">
            
              <b>test_blank_like_arguments_to_query_methods_dont_raise_errors</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_blank_like_arguments_to_query_methods_dont_raise_errors" name="method-i-test_blank_like_arguments_to_query_methods_dont_raise_errors" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_blank_like_arguments_to_query_methods_dont_raise_errors_source')" id="l_method-i-test_blank_like_arguments_to_query_methods_dont_raise_errors_source">show</a>
                
              </p>
              <div id="method-i-test_blank_like_arguments_to_query_methods_dont_raise_errors_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 332</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_blank_like_arguments_to_query_methods_dont_raise_errors</span>
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">references</span>([]) }
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">includes</span>([]) }
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">preload</span>([]) }
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">group</span>([]) }
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">reorder</span>([]) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_build">
            
              <b>test_build</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_build" name="method-i-test_build" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_build_source')" id="l_method-i-test_build_source">show</a>
                
              </p>
              <div id="method-i-test_build_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 924</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_build</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">post</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Post</span>, <span class="ruby-identifier">post</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_count">
            
              <b>test_count</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_count" name="method-i-test_count" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_count_source')" id="l_method-i-test_count_source">show</a>
                
              </p>
              <div id="method-i-test_count_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 771</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_count</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">11</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">11</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">count</span>(<span class="ruby-value">:all</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">11</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">count</span>(<span class="ruby-value">:id</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;comments_count &gt; 1&#39;</span>).<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">9</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:comments_count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>).<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_count_complex_chained_relations">
            
              <b>test_count_complex_chained_relations</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_count_complex_chained_relations" name="method-i-test_count_complex_chained_relations" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_count_complex_chained_relations_source')" id="l_method-i-test_count_complex_chained_relations_source">show</a>
                
              </p>
              <div id="method-i-test_count_complex_chained_relations_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 850</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_count_complex_chained_relations</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">&#39;comments_count&#39;</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;id is not null&#39;</span>).<span class="ruby-identifier">group</span>(<span class="ruby-string">&quot;author_id&quot;</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;comments_count &gt; 0&quot;</span>)

  <span class="ruby-identifier">expected</span> = { <span class="ruby-number">1</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">2</span> }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_count_explicit_columns">
            
              <b>test_count_explicit_columns</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_count_explicit_columns" name="method-i-test_count_explicit_columns" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_count_explicit_columns_source')" id="l_method-i-test_count_explicit_columns_source">show</a>
                
              </p>
              <div id="method-i-test_count_explicit_columns_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 792</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_count_explicit_columns</span>
  <span class="ruby-constant">Post</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-value">:comments_count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-number">0</span>], <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">&#39;comments_count&#39;</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;id is not null&#39;</span>).<span class="ruby-identifier">group</span>(<span class="ruby-string">&#39;id&#39;</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id&#39;</span>).<span class="ruby-identifier">count</span>.<span class="ruby-identifier">values</span>.<span class="ruby-identifier">uniq</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;id is not null&#39;</span>).<span class="ruby-identifier">select</span>(<span class="ruby-string">&#39;comments_count&#39;</span>).<span class="ruby-identifier">count</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">11</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">&#39;comments_count&#39;</span>).<span class="ruby-identifier">count</span>(<span class="ruby-string">&#39;id&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">&#39;comments_count&#39;</span>).<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">count</span>(<span class="ruby-value">:comments_count</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">count</span>(<span class="ruby-string">&#39;comments_count&#39;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_count_with_distinct">
            
              <b>test_count_with_distinct</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_count_with_distinct" name="method-i-test_count_with_distinct" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_count_with_distinct_source')" id="l_method-i-test_count_with_distinct_source">show</a>
                
              </p>
              <div id="method-i-test_count_with_distinct_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 782</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_count_with_distinct</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">count</span>(<span class="ruby-value">:comments_count</span>, <span class="ruby-value">:distinct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">11</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">count</span>(<span class="ruby-value">:comments_count</span>, <span class="ruby-value">:distinct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">select</span>(<span class="ruby-value">:comments_count</span>).<span class="ruby-identifier">count</span>(<span class="ruby-value">:distinct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">11</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">select</span>(<span class="ruby-value">:comments_count</span>).<span class="ruby-identifier">count</span>(<span class="ruby-value">:distinct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_create">
            
              <b>test_create</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_create" name="method-i-test_create" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_create_source')" id="l_method-i-test_create_source">show</a>
                
              </p>
              <div id="method-i-test_create_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 939</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_create</span>
  <span class="ruby-identifier">birds</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">sparrow</span> = <span class="ruby-identifier">birds</span>.<span class="ruby-identifier">create</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">sparrow</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">sparrow</span>.<span class="ruby-identifier">persisted?</span>

  <span class="ruby-identifier">hen</span> = <span class="ruby-identifier">birds</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;hen&#39;</span>).<span class="ruby-identifier">create</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">hen</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;hen&#39;</span>, <span class="ruby-identifier">hen</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_create_bang">
            
              <b>test_create_bang</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_create_bang" name="method-i-test_create_bang" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_create_bang_source')" id="l_method-i-test_create_bang_source">show</a>
                
              </p>
              <div id="method-i-test_create_bang_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 951</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_create_bang</span>
  <span class="ruby-identifier">birds</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordInvalid</span>) { <span class="ruby-identifier">birds</span>.<span class="ruby-identifier">create!</span> }

  <span class="ruby-identifier">hen</span> = <span class="ruby-identifier">birds</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;hen&#39;</span>).<span class="ruby-identifier">create!</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">hen</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">hen</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;hen&#39;</span>, <span class="ruby-identifier">hen</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_order_with_scope_order">
            
              <b>test_default_scope_order_with_scope_order</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_default_scope_order_with_scope_order" name="method-i-test_default_scope_order_with_scope_order" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_order_with_scope_order_source')" id="l_method-i-test_default_scope_order_with_scope_order_source">show</a>
                
              </p>
              <div id="method-i-test_default_scope_order_with_scope_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1168</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_order_with_scope_order</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;honda&#39;</span>, <span class="ruby-constant">CoolCar</span>.<span class="ruby-identifier">order_using_new_style</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;honda&#39;</span>, <span class="ruby-constant">FastCar</span>.<span class="ruby-identifier">order_using_new_style</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_with_conditions_hash">
            
              <b>test_default_scope_with_conditions_hash</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_default_scope_with_conditions_hash" name="method-i-test_default_scope_with_conditions_hash" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_with_conditions_hash_source')" id="l_method-i-test_default_scope_with_conditions_hash_source">show</a>
                
              </p>
              <div id="method-i-test_default_scope_with_conditions_hash_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 458</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_with_conditions_hash</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Jamis&#39;</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>, <span class="ruby-constant">DeveloperCalledJamis</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;Jamis&#39;</span>, <span class="ruby-constant">DeveloperCalledJamis</span>.<span class="ruby-identifier">create!</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_with_conditions_string">
            
              <b>test_default_scope_with_conditions_string</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_default_scope_with_conditions_string" name="method-i-test_default_scope_with_conditions_string" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_with_conditions_string_source')" id="l_method-i-test_default_scope_with_conditions_string_source">show</a>
                
              </p>
              <div id="method-i-test_default_scope_with_conditions_string_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 453</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_with_conditions_string</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;David&#39;</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>, <span class="ruby-constant">DeveloperCalledDavid</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>
  <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">DeveloperCalledDavid</span>.<span class="ruby-identifier">create!</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scoping_finder_methods">
            
              <b>test_default_scoping_finder_methods</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_default_scoping_finder_methods" name="method-i-test_default_scoping_finder_methods" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scoping_finder_methods_source')" id="l_method-i-test_default_scoping_finder_methods_source">show</a>
                
              </p>
              <div id="method-i-test_default_scoping_finder_methods_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 463</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scoping_finder_methods</span>
  <span class="ruby-identifier">developers</span> = <span class="ruby-constant">DeveloperCalledDavid</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id&#39;</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;David&#39;</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>, <span class="ruby-identifier">developers</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_delete_all">
            
              <b>test_delete_all</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_delete_all" name="method-i-test_delete_all" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_delete_all_source')" id="l_method-i-test_delete_all_source">show</a>
                
              </p>
              <div id="method-i-test_delete_all_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 673</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_delete_all</span>
  <span class="ruby-identifier">davids</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;David&#39;</span>)

  <span class="ruby-identifier">assert_difference</span>(<span class="ruby-string">&#39;Author.count&#39;</span>, <span class="ruby-number">-1</span>) { <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">delete_all</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_delete_all_limit_error">
            
              <b>test_delete_all_limit_error</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_delete_all_limit_error" name="method-i-test_delete_all_limit_error" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_delete_all_limit_error_source')" id="l_method-i-test_delete_all_limit_error_source">show</a>
                
              </p>
              <div id="method-i-test_delete_all_limit_error_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 693</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_delete_all_limit_error</span>
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">ActiveRecordError</span>) { <span class="ruby-constant">Author</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">10</span>).<span class="ruby-identifier">delete_all</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_delete_all_loaded">
            
              <b>test_delete_all_loaded</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_delete_all_loaded" name="method-i-test_delete_all_loaded" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_delete_all_loaded_source')" id="l_method-i-test_delete_all_loaded_source">show</a>
                
              </p>
              <div id="method-i-test_delete_all_loaded_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 680</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_delete_all_loaded</span>
  <span class="ruby-identifier">davids</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;David&#39;</span>)

  <span class="ruby-comment"># Force load</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)], <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">assert_difference</span>(<span class="ruby-string">&#39;Author.count&#39;</span>, <span class="ruby-number">-1</span>) { <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">delete_all</span> }

  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_destroy_all">
            
              <b>test_destroy_all</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_destroy_all" name="method-i-test_destroy_all" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_destroy_all_source')" id="l_method-i-test_destroy_all_source">show</a>
                
              </p>
              <div id="method-i-test_destroy_all_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 660</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_destroy_all</span>
  <span class="ruby-identifier">davids</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;David&#39;</span>)

  <span class="ruby-comment"># Force load</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)], <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">assert_difference</span>(<span class="ruby-string">&#39;Author.count&#39;</span>, <span class="ruby-number">-1</span>) { <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">destroy_all</span> }

  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_do_not_double_quote_string_id">
            
              <b>test_do_not_double_quote_string_id</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_do_not_double_quote_string_id" name="method-i-test_do_not_double_quote_string_id" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_do_not_double_quote_string_id_source')" id="l_method-i-test_do_not_double_quote_string_id_source">show</a>
                
              </p>
              <div id="method-i-test_do_not_double_quote_string_id_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 23</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_do_not_double_quote_string_id</span>
  <span class="ruby-identifier">van</span> = <span class="ruby-constant">Minivan</span>.<span class="ruby-identifier">last</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">van</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">van</span>.<span class="ruby-identifier">id</span>, <span class="ruby-constant">Minivan</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:minivan_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">van</span>).<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">minivan_id</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_do_not_double_quote_string_id_with_array">
            
              <b>test_do_not_double_quote_string_id_with_array</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_do_not_double_quote_string_id_with_array" name="method-i-test_do_not_double_quote_string_id_with_array" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_do_not_double_quote_string_id_with_array_source')" id="l_method-i-test_do_not_double_quote_string_id_with_array_source">show</a>
                
              </p>
              <div id="method-i-test_do_not_double_quote_string_id_with_array_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 29</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_do_not_double_quote_string_id_with_array</span>
  <span class="ruby-identifier">van</span> = <span class="ruby-constant">Minivan</span>.<span class="ruby-identifier">last</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">van</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">van</span>, <span class="ruby-constant">Minivan</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:minivan_id</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">van</span>]).<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dynamic_find_by_attributes">
            
              <b>test_dynamic_find_by_attributes</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_dynamic_find_by_attributes" name="method-i-test_dynamic_find_by_attributes" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dynamic_find_by_attributes_source')" id="l_method-i-test_dynamic_find_by_attributes_source">show</a>
                
              </p>
              <div id="method-i-test_dynamic_find_by_attributes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 489</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dynamic_find_by_attributes</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">author</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:taggings</span>).<span class="ruby-identifier">find_by_id</span>(<span class="ruby-identifier">david</span>.<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">expected_taggings</span> = <span class="ruby-identifier">taggings</span>(<span class="ruby-value">:welcome_general</span>, <span class="ruby-value">:thinking_general</span>)

  <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected_taggings</span>, <span class="ruby-identifier">author</span>.<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">sort_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">id</span> }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">all</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">david</span>, <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">find_by_id_and_name</span>(<span class="ruby-identifier">david</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">david</span>, <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">find_by_id_and_name!</span>(<span class="ruby-identifier">david</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">name</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dynamic_find_by_attributes_bang">
            
              <b>test_dynamic_find_by_attributes_bang</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_dynamic_find_by_attributes_bang" name="method-i-test_dynamic_find_by_attributes_bang" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dynamic_find_by_attributes_bang_source')" id="l_method-i-test_dynamic_find_by_attributes_bang_source">show</a>
                
              </p>
              <div id="method-i-test_dynamic_find_by_attributes_bang_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 503</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dynamic_find_by_attributes_bang</span>
  <span class="ruby-identifier">author</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">find_by_id!</span>(<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;David&quot;</span>, <span class="ruby-identifier">author</span>.<span class="ruby-identifier">name</span>

  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-constant">Author</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">find_by_id_and_name!</span>(<span class="ruby-number">20</span>, <span class="ruby-string">&#39;invalid&#39;</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dynamic_finder">
            
              <b>test_dynamic_finder</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_dynamic_finder" name="method-i-test_dynamic_finder" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dynamic_finder_source')" id="l_method-i-test_dynamic_finder_source">show</a>
                
              </p>
              <div id="method-i-test_dynamic_finder_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 50</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dynamic_finder</span>
  <span class="ruby-identifier">x</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;author_id = ?&#39;</span>, <span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">klass</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:find_by_id</span>), <span class="ruby-string">&#39;@klass should handle dynamic finders&#39;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_eager_association_loading_of_stis_with_multiple_references">
            
              <b>test_eager_association_loading_of_stis_with_multiple_references</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_eager_association_loading_of_stis_with_multiple_references" name="method-i-test_eager_association_loading_of_stis_with_multiple_references" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_eager_association_loading_of_stis_with_multiple_references_source')" id="l_method-i-test_eager_association_loading_of_stis_with_multiple_references_source">show</a>
                
              </p>
              <div id="method-i-test_eager_association_loading_of_stis_with_multiple_references_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 384</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_eager_association_loading_of_stis_with_multiple_references</span>
  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">eager_load</span>(<span class="ruby-value">:posts</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:special_comments</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:post</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-value">:special_comments</span>, <span class="ruby-value">:very_special_comment</span> ] } }).
    <span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;comments.body, very_special_comments_posts.body&#39;</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;posts.id = 4&#39;</span>).<span class="ruby-identifier">to_a</span>

  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)], <span class="ruby-identifier">authors</span>
  <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">special_comments</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">post</span>.<span class="ruby-identifier">special_comments</span>
    <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">special_comments</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">post</span>.<span class="ruby-identifier">very_special_comment</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_eager_loading_with_conditions_on_joins">
            
              <b>test_eager_loading_with_conditions_on_joins</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_eager_loading_with_conditions_on_joins" name="method-i-test_eager_loading_with_conditions_on_joins" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_eager_loading_with_conditions_on_joins_source')" id="l_method-i-test_eager_loading_with_conditions_on_joins_source">show</a>
                
              </p>
              <div id="method-i-test_eager_loading_with_conditions_on_joins_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1202</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_eager_loading_with_conditions_on_joins</span>
  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:comments</span>)

  <span class="ruby-comment"># This references the comments table, and so it should cause the comments to be eager</span>
  <span class="ruby-comment"># loaded via a JOIN, rather than by subsequent queries.</span>
  <span class="ruby-identifier">scope</span> = <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">joins</span>(
    <span class="ruby-constant">Post</span>.<span class="ruby-identifier">arel_table</span>.<span class="ruby-identifier">create_join</span>(
      <span class="ruby-constant">Post</span>.<span class="ruby-identifier">arel_table</span>,
      <span class="ruby-constant">Post</span>.<span class="ruby-identifier">arel_table</span>.<span class="ruby-identifier">create_on</span>(<span class="ruby-constant">Comment</span>.<span class="ruby-identifier">arel_table</span>[<span class="ruby-value">:id</span>].<span class="ruby-identifier">eq</span>(<span class="ruby-number">3</span>))
    )
  )

  <span class="ruby-identifier">assert_deprecated</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">eager_loading?</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_empty">
            
              <b>test_empty</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_empty" name="method-i-test_empty" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_empty_source')" id="l_method-i-test_empty_source">show</a>
                
              </p>
              <div id="method-i-test_empty_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 857</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_empty</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) { <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">false</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">empty?</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">no_posts</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;&quot;</span>)
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) { <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">true</span>, <span class="ruby-identifier">no_posts</span>.<span class="ruby-identifier">empty?</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">no_posts</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">best_posts</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:comments_count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>)
  <span class="ruby-identifier">best_posts</span>.<span class="ruby-identifier">to_a</span> <span class="ruby-comment"># force load</span>
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">false</span>, <span class="ruby-identifier">best_posts</span>.<span class="ruby-identifier">empty?</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_empty_complex_chained_relations">
            
              <b>test_empty_complex_chained_relations</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_empty_complex_chained_relations" name="method-i-test_empty_complex_chained_relations" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_empty_complex_chained_relations_source')" id="l_method-i-test_empty_complex_chained_relations_source">show</a>
                
              </p>
              <div id="method-i-test_empty_complex_chained_relations_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 872</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_empty_complex_chained_relations</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">&quot;comments_count&quot;</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;id is not null&quot;</span>).<span class="ruby-identifier">group</span>(<span class="ruby-string">&quot;author_id&quot;</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;comments_count &gt; 0&quot;</span>)

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) { <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">false</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">empty?</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">no_posts</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;&quot;</span>)
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) { <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">true</span>, <span class="ruby-identifier">no_posts</span>.<span class="ruby-identifier">empty?</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">no_posts</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_empty_with_zero_limit">
            
              <b>test_empty_with_zero_limit</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_empty_with_zero_limit" name="method-i-test_empty_with_zero_limit" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_empty_with_zero_limit_source')" id="l_method-i-test_empty_with_zero_limit_source">show</a>
                
              </p>
              <div id="method-i-test_empty_with_zero_limit_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 843</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_empty_with_zero_limit</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">0</span>)

  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">true</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">empty?</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_except">
            
              <b>test_except</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_except" name="method-i-test_except" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_except_source')" id="l_method-i-test_except_source">show</a>
                
              </p>
              <div id="method-i-test_except_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1125</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_except</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:author_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id ASC&#39;</span>).<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>)], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>

  <span class="ruby-identifier">author_posts</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">except</span>(<span class="ruby-value">:order</span>, <span class="ruby-value">:limit</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:author_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span>).<span class="ruby-identifier">to_a</span>, <span class="ruby-identifier">author_posts</span>.<span class="ruby-identifier">to_a</span>

  <span class="ruby-identifier">all_posts</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">except</span>(<span class="ruby-value">:where</span>, <span class="ruby-value">:order</span>, <span class="ruby-value">:limit</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>, <span class="ruby-identifier">all_posts</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_exists">
            
              <b>test_exists</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_exists" name="method-i-test_exists" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_exists_source')" id="l_method-i-test_exists_source">show</a>
                
              </p>
              <div id="method-i-test_exists_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 641</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_exists</span>
  <span class="ruby-identifier">davids</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;David&#39;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">exists?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">authors</span>(<span class="ruby-value">:mary</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-string">&quot;42&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-number">42</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">davids</span>.<span class="ruby-identifier">new</span>)

  <span class="ruby-identifier">fake</span>  = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;fake author&#39;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">fake</span>.<span class="ruby-identifier">exists?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">fake</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_explicit_create_scope">
            
              <b>test_explicit_create_scope</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_explicit_create_scope" name="method-i-test_explicit_create_scope" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_explicit_create_scope_source')" id="l_method-i-test_explicit_create_scope_source">show</a>
                
              </p>
              <div id="method-i-test_explicit_create_scope_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1117</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_explicit_create_scope</span>
  <span class="ruby-identifier">hens</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;hen&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;hen&#39;</span>, <span class="ruby-identifier">hens</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">name</span>

  <span class="ruby-identifier">hens</span> = <span class="ruby-identifier">hens</span>.<span class="ruby-identifier">create_with</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;cock&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;cock&#39;</span>, <span class="ruby-identifier">hens</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all_using_where_twice_should_or_the_relation">
            
              <b>test_find_all_using_where_twice_should_or_the_relation</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_all_using_where_twice_should_or_the_relation" name="method-i-test_find_all_using_where_twice_should_or_the_relation" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_using_where_twice_should_or_the_relation_source')" id="l_method-i-test_find_all_using_where_twice_should_or_the_relation_source">show</a>
                
              </p>
              <div id="method-i-test_find_all_using_where_twice_should_or_the_relation_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 563</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all_using_where_twice_should_or_the_relation</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">unscoped</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">relation</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Santiago&#39;</span>)
  <span class="ruby-identifier">relation</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all_using_where_with_relation">
            
              <b>test_find_all_using_where_with_relation</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_all_using_where_with_relation" name="method-i-test_find_all_using_where_with_relation" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_using_where_with_relation_source')" id="l_method-i-test_find_all_using_where_with_relation_source">show</a>
                
              </p>
              <div id="method-i-test_find_all_using_where_with_relation_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 591</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all_using_where_with_relation</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-comment"># switching the lines below would succeed in current rails</span>
  <span class="ruby-comment"># assert_queries(2) {</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) {
    <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">id</span>))
    <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">david</span>], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>
  }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all_using_where_with_relation_and_alternate_primary_key">
            
              <b>test_find_all_using_where_with_relation_and_alternate_primary_key</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_all_using_where_with_relation_and_alternate_primary_key" name="method-i-test_find_all_using_where_with_relation_and_alternate_primary_key" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_using_where_with_relation_and_alternate_primary_key_source')" id="l_method-i-test_find_all_using_where_with_relation_and_alternate_primary_key_source">show</a>
                
              </p>
              <div id="method-i-test_find_all_using_where_with_relation_and_alternate_primary_key_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 601</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all_using_where_with_relation_and_alternate_primary_key</span>
  <span class="ruby-identifier">cool_first</span> = <span class="ruby-identifier">minivans</span>(<span class="ruby-value">:cool_first</span>)
  <span class="ruby-comment"># switching the lines below would succeed in current rails</span>
  <span class="ruby-comment"># assert_queries(2) {</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) {
    <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Minivan</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:minivan_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Minivan</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">cool_first</span>.<span class="ruby-identifier">name</span>))
    <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">cool_first</span>], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>
  }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all_using_where_with_relation_does_not_alter_select_values">
            
              <b>test_find_all_using_where_with_relation_does_not_alter_select_values</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_all_using_where_with_relation_does_not_alter_select_values" name="method-i-test_find_all_using_where_with_relation_does_not_alter_select_values" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_using_where_with_relation_does_not_alter_select_values_source')" id="l_method-i-test_find_all_using_where_with_relation_does_not_alter_select_values_source">show</a>
                
              </p>
              <div id="method-i-test_find_all_using_where_with_relation_does_not_alter_select_values_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 611</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all_using_where_with_relation_does_not_alter_select_values</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)

  <span class="ruby-identifier">subquery</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">id</span>)

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) {
    <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">subquery</span>)
    <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">david</span>], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>
  }

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">subquery</span>.<span class="ruby-identifier">select_values</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all_using_where_with_relation_with_joins">
            
              <b>test_find_all_using_where_with_relation_with_joins</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_all_using_where_with_relation_with_joins" name="method-i-test_find_all_using_where_with_relation_with_joins" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_using_where_with_relation_with_joins_source')" id="l_method-i-test_find_all_using_where_with_relation_with_joins_source">show</a>
                
              </p>
              <div id="method-i-test_find_all_using_where_with_relation_with_joins_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 624</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all_using_where_with_relation_with_joins</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) {
    <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Author</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-value">:posts</span>).<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">id</span>))
    <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">david</span>], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>
  }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all_using_where_with_relation_with_select_to_build_subquery">
            
              <b>test_find_all_using_where_with_relation_with_select_to_build_subquery</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_all_using_where_with_relation_with_select_to_build_subquery" name="method-i-test_find_all_using_where_with_relation_with_select_to_build_subquery" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_using_where_with_relation_with_select_to_build_subquery_source')" id="l_method-i-test_find_all_using_where_with_relation_with_select_to_build_subquery_source">show</a>
                
              </p>
              <div id="method-i-test_find_all_using_where_with_relation_with_select_to_build_subquery_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 633</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all_using_where_with_relation_with_select_to_build_subquery</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) {
    <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">select</span>(<span class="ruby-value">:name</span>))
    <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">david</span>], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>
  }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all_with_join">
            
              <b>test_find_all_with_join</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_all_with_join" name="method-i-test_find_all_with_join" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_with_join_source')" id="l_method-i-test_find_all_with_join_source">show</a>
                
              </p>
              <div id="method-i-test_find_all_with_join_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 301</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all_with_join</span>
  <span class="ruby-identifier">developers_on_project_one</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-string">&#39;LEFT JOIN developers_projects ON developers.id = developers_projects.developer_id&#39;</span>).
    <span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;project_id=1&#39;</span>).<span class="ruby-identifier">to_a</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">developers_on_project_one</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">developer_names</span> = <span class="ruby-identifier">developers_on_project_one</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">name</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">developer_names</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&#39;David&#39;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">developer_names</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&#39;Jamis&#39;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all_with_multiple_should_use_and">
            
              <b>test_find_all_with_multiple_should_use_and</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_all_with_multiple_should_use_and" name="method-i-test_find_all_with_multiple_should_use_and" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_with_multiple_should_use_and_source')" id="l_method-i-test_find_all_with_multiple_should_use_and_source">show</a>
                
              </p>
              <div id="method-i-test_find_all_with_multiple_should_use_and_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 579</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all_with_multiple_should_use_and</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">relation</span> = [
    { <span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">name</span> },
    { <span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Santiago&#39;</span> },
    { <span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;tenderlove&#39;</span> },
  ].<span class="ruby-identifier">inject</span>(<span class="ruby-constant">Author</span>.<span class="ruby-identifier">unscoped</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">memo</span>, <span class="ruby-identifier">param</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">memo</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">param</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_by_classname">
            
              <b>test_find_by_classname</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_by_classname" name="method-i-test_find_by_classname" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_by_classname_source')" id="l_method-i-test_find_by_classname_source">show</a>
                
              </p>
              <div id="method-i-test_find_by_classname_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 552</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_by_classname</span>
  <span class="ruby-constant">Author</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Mary</span>.<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Mary</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_by_id_with_list_of_ar">
            
              <b>test_find_by_id_with_list_of_ar</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_by_id_with_list_of_ar" name="method-i-test_find_by_id_with_list_of_ar" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_by_id_with_list_of_ar_source')" id="l_method-i-test_find_by_id_with_list_of_ar_source">show</a>
                
              </p>
              <div id="method-i-test_find_by_id_with_list_of_ar_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 557</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_by_id_with_list_of_ar</span>
  <span class="ruby-identifier">author</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">find_by_id</span>([<span class="ruby-identifier">author</span>])
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">author</span>, <span class="ruby-identifier">authors</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_id">
            
              <b>test_find_id</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_id" name="method-i-test_find_id" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_id_source')" id="l_method-i-test_find_id_source">show</a>
                
              </p>
              <div id="method-i-test_find_id_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 510</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_id</span>
  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;David&#39;</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">name</span>

  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;lifo&#39;</span>).<span class="ruby-identifier">find</span>(<span class="ruby-string">&#39;42&#39;</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_ids">
            
              <b>test_find_ids</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_ids" name="method-i-test_find_ids" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_ids_source')" id="l_method-i-test_find_ids_source">show</a>
                
              </p>
              <div id="method-i-test_find_ids_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 519</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_ids</span>
  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id ASC&#39;</span>)

  <span class="ruby-identifier">results</span> = <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>, <span class="ruby-identifier">authors</span>(<span class="ruby-value">:mary</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Array</span>, <span class="ruby-identifier">results</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">results</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;David&#39;</span>, <span class="ruby-identifier">results</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;Mary&#39;</span>, <span class="ruby-identifier">results</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">results</span>, <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">find</span>([<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>, <span class="ruby-identifier">authors</span>(<span class="ruby-value">:mary</span>).<span class="ruby-identifier">id</span>])

  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;lifo&#39;</span>).<span class="ruby-identifier">find</span>(<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>, <span class="ruby-string">&#39;42&#39;</span>) }
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">find</span>([<span class="ruby-string">&#39;42&#39;</span>, <span class="ruby-number">43</span>]) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_in_empty_array">
            
              <b>test_find_in_empty_array</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_in_empty_array" name="method-i-test_find_in_empty_array" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_in_empty_array_source')" id="l_method-i-test_find_in_empty_array_source">show</a>
                
              </p>
              <div id="method-i-test_find_in_empty_array_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 533</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_in_empty_array</span>
  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> [])
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">blank?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_on_hash_conditions">
            
              <b>test_find_on_hash_conditions</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_on_hash_conditions" name="method-i-test_find_on_hash_conditions" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_on_hash_conditions_source')" id="l_method-i-test_find_on_hash_conditions_source">show</a>
                
              </p>
              <div id="method-i-test_find_on_hash_conditions_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 311</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_on_hash_conditions</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-value">:where</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-value">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>}).<span class="ruby-identifier">to_a</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">where</span>({ <span class="ruby-value">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span> }).<span class="ruby-identifier">to_a</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_or_create_by">
            
              <b>test_find_or_create_by</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_or_create_by" name="method-i-test_find_or_create_by" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_or_create_by_source')" id="l_method-i-test_find_or_create_by_source">show</a>
                
              </p>
              <div id="method-i-test_find_or_create_by_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1084</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_or_create_by</span>
  <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;bob&#39;</span>)

  <span class="ruby-identifier">bird</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">find_or_create_by</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;bob&#39;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">bird</span>.<span class="ruby-identifier">persisted?</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">bird</span>, <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">find_or_create_by</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;bob&#39;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_or_create_by-21">
            
              <b>test_find_or_create_by!</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_or_create_by-21" name="method-i-test_find_or_create_by-21" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_or_create_by-21_source')" id="l_method-i-test_find_or_create_by-21_source">show</a>
                
              </p>
              <div id="method-i-test_find_or_create_by-21_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1103</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_or_create_by!</span>
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordInvalid</span>) { <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">find_or_create_by!</span>(<span class="ruby-identifier">color</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;green&#39;</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_or_create_by_with_create_with">
            
              <b>test_find_or_create_by_with_create_with</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_or_create_by_with_create_with" name="method-i-test_find_or_create_by_with_create_with" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_or_create_by_with_create_with_source')" id="l_method-i-test_find_or_create_by_with_create_with_source">show</a>
                
              </p>
              <div id="method-i-test_find_or_create_by_with_create_with_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1093</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_or_create_by_with_create_with</span>
  <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;bob&#39;</span>)

  <span class="ruby-identifier">bird</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">create_with</span>(<span class="ruby-identifier">color</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">find_or_create_by</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;bob&#39;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">bird</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;green&#39;</span>, <span class="ruby-identifier">bird</span>.<span class="ruby-identifier">color</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">bird</span>, <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">create_with</span>(<span class="ruby-identifier">color</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;blue&#39;</span>).<span class="ruby-identifier">find_or_create_by</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;bob&#39;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_or_initialize_by">
            
              <b>test_find_or_initialize_by</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_or_initialize_by" name="method-i-test_find_or_initialize_by" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_or_initialize_by_source')" id="l_method-i-test_find_or_initialize_by_source">show</a>
                
              </p>
              <div id="method-i-test_find_or_initialize_by_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1107</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_or_initialize_by</span>
  <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;bob&#39;</span>)

  <span class="ruby-identifier">bird</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">find_or_initialize_by</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;bob&#39;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">bird</span>.<span class="ruby-identifier">new_record?</span>
  <span class="ruby-identifier">bird</span>.<span class="ruby-identifier">save!</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">bird</span>, <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">find_or_initialize_by</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;bob&#39;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_with_included_associations">
            
              <b>test_find_with_included_associations</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_with_included_associations" name="method-i-test_find_with_included_associations" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_with_included_associations_source')" id="l_method-i-test_find_with_included_associations_source">show</a>
                
              </p>
              <div id="method-i-test_find_with_included_associations_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 430</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_with_included_associations</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:comments</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;posts.id&#39;</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:comments</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;posts.id&#39;</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:author</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;posts.id&#39;</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">author</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">3</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:author</span>, <span class="ruby-value">:comments</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;posts.id&#39;</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">author</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_with_list_of_ar">
            
              <b>test_find_with_list_of_ar</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_with_list_of_ar" name="method-i-test_find_with_list_of_ar" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_with_list_of_ar_source')" id="l_method-i-test_find_with_list_of_ar_source">show</a>
                
              </p>
              <div id="method-i-test_find_with_list_of_ar_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 544</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_with_list_of_ar</span>
  <span class="ruby-identifier">author</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">find</span>([<span class="ruby-identifier">author</span>])
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">author</span>, <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_with_preloaded_associations">
            
              <b>test_find_with_preloaded_associations</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_with_preloaded_associations" name="method-i-test_find_with_preloaded_associations" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_with_preloaded_associations_source')" id="l_method-i-test_find_with_preloaded_associations_source">show</a>
                
              </p>
              <div id="method-i-test_find_with_preloaded_associations_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 395</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_with_preloaded_associations</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:comments</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;posts.id&#39;</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:comments</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;posts.id&#39;</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:author</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;posts.id&#39;</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">author</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:author</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;posts.id&#39;</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">author</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">3</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:author</span>, <span class="ruby-value">:comments</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;posts.id&#39;</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">author</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_with_readonly_option">
            
              <b>test_find_with_readonly_option</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_with_readonly_option" name="method-i-test_find_with_readonly_option" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_with_readonly_option_source')" id="l_method-i-test_find_with_readonly_option_source">show</a>
                
              </p>
              <div id="method-i-test_find_with_readonly_option_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 379</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_with_readonly_option</span>
  <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">d</span>.<span class="ruby-identifier">readonly?</span> }
  <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">readonly</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">assert</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">readonly?</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_last_with_arel_order">
            
              <b>test_finding_last_with_arel_order</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_last_with_arel_order" name="method-i-test_finding_last_with_arel_order" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_last_with_arel_order_source')" id="l_method-i-test_finding_last_with_arel_order_source">show</a>
                
              </p>
              <div id="method-i-test_finding_last_with_arel_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 177</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_last_with_arel_order</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-constant">Topic</span>.<span class="ruby-identifier">arel_table</span>[<span class="ruby-value">:id</span>].<span class="ruby-identifier">asc</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-value">:fourth</span>).<span class="ruby-identifier">title</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">title</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_arel_order">
            
              <b>test_finding_with_arel_order</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_arel_order" name="method-i-test_finding_with_arel_order" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_arel_order_source')" id="l_method-i-test_finding_with_arel_order_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_arel_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 155</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_arel_order</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-constant">Topic</span>.<span class="ruby-identifier">arel_table</span>[<span class="ruby-value">:id</span>].<span class="ruby-identifier">asc</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">4</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">title</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_assoc_order">
            
              <b>test_finding_with_assoc_order</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_assoc_order" name="method-i-test_finding_with_assoc_order" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_assoc_order_source')" id="l_method-i-test_finding_with_assoc_order_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_assoc_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 161</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_assoc_order</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:desc</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">4</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-value">:fourth</span>).<span class="ruby-identifier">title</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_complex_order">
            
              <b>test_finding_with_complex_order</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_complex_order" name="method-i-test_finding_with_complex_order" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_complex_order_source')" id="l_method-i-test_finding_with_complex_order_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_complex_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 213</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_complex_order</span>
  <span class="ruby-identifier">tags</span> = <span class="ruby-constant">Tag</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:taggings</span>).<span class="ruby-identifier">references</span>(<span class="ruby-value">:taggings</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;REPLACE(&#39;abc&#39;, taggings.taggable_type, taggings.taggable_type)&quot;</span>).<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">tags</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_complex_order_and_limit">
            
              <b>test_finding_with_complex_order_and_limit</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_complex_order_and_limit" name="method-i-test_finding_with_complex_order_and_limit" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_complex_order_and_limit_source')" id="l_method-i-test_finding_with_complex_order_and_limit_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_complex_order_and_limit_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 208</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_complex_order_and_limit</span>
  <span class="ruby-identifier">tags</span> = <span class="ruby-constant">Tag</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:taggings</span>).<span class="ruby-identifier">references</span>(<span class="ruby-value">:taggings</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;REPLACE(&#39;abc&#39;, taggings.taggable_type, taggings.taggable_type)&quot;</span>).<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">tags</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_conditions">
            
              <b>test_finding_with_conditions</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_conditions" name="method-i-test_finding_with_conditions" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_conditions_source')" id="l_method-i-test_finding_with_conditions_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_conditions_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 142</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_conditions</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&quot;David&quot;</span>], <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;David&#39;</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:name</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;Mary&#39;</span>],  <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>([<span class="ruby-string">&quot;name = ?&quot;</span>, <span class="ruby-string">&#39;Mary&#39;</span>]).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:name</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;Mary&#39;</span>],  <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;name = ?&quot;</span>, <span class="ruby-string">&#39;Mary&#39;</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:name</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_cross_table_order_and_limit">
            
              <b>test_finding_with_cross_table_order_and_limit</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_cross_table_order_and_limit" name="method-i-test_finding_with_cross_table_order_and_limit" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_cross_table_order_and_limit_source')" id="l_method-i-test_finding_with_cross_table_order_and_limit_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_cross_table_order_and_limit_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 201</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_cross_table_order_and_limit</span>
  <span class="ruby-identifier">tags</span> = <span class="ruby-constant">Tag</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:taggings</span>).
            <span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;tags.name asc&quot;</span>, <span class="ruby-string">&quot;taggings.taggable_id asc&quot;</span>, <span class="ruby-string">&quot;REPLACE(&#39;abc&#39;, taggings.taggable_type, taggings.taggable_type)&quot;</span>).
            <span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">tags</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_group">
            
              <b>test_finding_with_group</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_group" name="method-i-test_finding_with_group" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_group_source')" id="l_method-i-test_finding_with_group_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_group_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 229</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_group</span>
  <span class="ruby-identifier">developers</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">group</span>(<span class="ruby-string">&quot;salary&quot;</span>).<span class="ruby-identifier">select</span>(<span class="ruby-string">&quot;salary&quot;</span>).<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">4</span>, <span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">4</span>, <span class="ruby-identifier">developers</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:salary</span>).<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_hash_conditions_on_joined_table">
            
              <b>test_finding_with_hash_conditions_on_joined_table</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_hash_conditions_on_joined_table" name="method-i-test_finding_with_hash_conditions_on_joined_table" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_hash_conditions_on_joined_table_source')" id="l_method-i-test_finding_with_hash_conditions_on_joined_table_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_hash_conditions_on_joined_table_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 295</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_hash_conditions_on_joined_table</span>
  <span class="ruby-identifier">firms</span> = <span class="ruby-constant">DependentFirm</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-value">:account</span>).<span class="ruby-identifier">where</span>({<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;RailsCore&#39;</span>, <span class="ruby-value">:accounts</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:credit_limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">55</span><span class="ruby-operator">..</span><span class="ruby-number">60</span> }}).<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">firms</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">companies</span>(<span class="ruby-value">:rails_core</span>), <span class="ruby-identifier">firms</span>.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_order">
            
              <b>test_finding_with_order</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_order" name="method-i-test_finding_with_order" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_order_source')" id="l_method-i-test_finding_with_order_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 148</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_order</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">4</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">title</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_order_and_take">
            
              <b>test_finding_with_order_and_take</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_order_and_take" name="method-i-test_finding_with_order_and_take" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_order_and_take_source')" id="l_method-i-test_finding_with_order_and_take_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_order_and_take_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 194</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_order_and_take</span>
  <span class="ruby-identifier">entrants</span> = <span class="ruby-constant">Entrant</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;id ASC&quot;</span>).<span class="ruby-identifier">limit</span>(<span class="ruby-number">2</span>).<span class="ruby-identifier">to_a</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">entrants</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">entrants</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">name</span>, <span class="ruby-identifier">entrants</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_order_concatenated">
            
              <b>test_finding_with_order_concatenated</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_order_concatenated" name="method-i-test_finding_with_order_concatenated" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_order_concatenated_source')" id="l_method-i-test_finding_with_order_concatenated_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_order_concatenated_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 182</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_order_concatenated</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;title&#39;</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;author_name&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">4</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-value">:fourth</span>).<span class="ruby-identifier">title</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_order_limit_and_offset">
            
              <b>test_finding_with_order_limit_and_offset</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_order_limit_and_offset" name="method-i-test_finding_with_order_limit_and_offset" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_order_limit_and_offset_source')" id="l_method-i-test_finding_with_order_limit_and_offset_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_order_limit_and_offset_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 218</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_order_limit_and_offset</span>
  <span class="ruby-identifier">entrants</span> = <span class="ruby-constant">Entrant</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;id ASC&quot;</span>).<span class="ruby-identifier">limit</span>(<span class="ruby-number">2</span>).<span class="ruby-identifier">offset</span>(<span class="ruby-number">1</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">entrants</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">entrants</span>(<span class="ruby-value">:second</span>).<span class="ruby-identifier">name</span>, <span class="ruby-identifier">entrants</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>

  <span class="ruby-identifier">entrants</span> = <span class="ruby-constant">Entrant</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;id ASC&quot;</span>).<span class="ruby-identifier">limit</span>(<span class="ruby-number">2</span>).<span class="ruby-identifier">offset</span>(<span class="ruby-number">2</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">entrants</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">entrants</span>(<span class="ruby-value">:third</span>).<span class="ruby-identifier">name</span>, <span class="ruby-identifier">entrants</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_reorder">
            
              <b>test_finding_with_reorder</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_reorder" name="method-i-test_finding_with_reorder" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_reorder_source')" id="l_method-i-test_finding_with_reorder_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_reorder_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 188</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_reorder</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;author_name&#39;</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;title&#39;</span>).<span class="ruby-identifier">reorder</span>(<span class="ruby-string">&#39;id&#39;</span>).<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">topics_titles</span> = <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">title</span> }
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;The First Topic&#39;</span>, <span class="ruby-string">&#39;The Second Topic of the day&#39;</span>, <span class="ruby-string">&#39;The Third Topic of the day&#39;</span>, <span class="ruby-string">&#39;The Fourth Topic of the day&#39;</span>], <span class="ruby-identifier">topics_titles</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_reverted_assoc_order">
            
              <b>test_finding_with_reverted_assoc_order</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_reverted_assoc_order" name="method-i-test_finding_with_reverted_assoc_order" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_reverted_assoc_order_source')" id="l_method-i-test_finding_with_reverted_assoc_order_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_reverted_assoc_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 167</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_reverted_assoc_order</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:asc</span>).<span class="ruby-identifier">reverse_order</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">4</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-value">:fourth</span>).<span class="ruby-identifier">title</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_subquery">
            
              <b>test_finding_with_subquery</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_subquery" name="method-i-test_finding_with_subquery" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_subquery_source')" id="l_method-i-test_finding_with_subquery_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_subquery_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 135</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_subquery</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">&#39;*&#39;</span>).<span class="ruby-identifier">from</span>(<span class="ruby-identifier">relation</span>).<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">&#39;subquery.*&#39;</span>).<span class="ruby-identifier">from</span>(<span class="ruby-identifier">relation</span>).<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">&#39;a.*&#39;</span>).<span class="ruby-identifier">from</span>(<span class="ruby-identifier">relation</span>, <span class="ruby-value">:a</span>).<span class="ruby-identifier">to_a</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_or_create">
            
              <b>test_first_or_create</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_first_or_create" name="method-i-test_first_or_create" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_or_create_source')" id="l_method-i-test_first_or_create_source">show</a>
                
              </p>
              <div id="method-i-test_first_or_create_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 962</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_or_create</span>
  <span class="ruby-identifier">parrot</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;parrot&#39;</span>)
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">parrot</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;parrot&#39;</span>, <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;green&#39;</span>, <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">color</span>

  <span class="ruby-identifier">same_parrot</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;parakeet&#39;</span>)
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">same_parrot</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">same_parrot</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">parrot</span>, <span class="ruby-identifier">same_parrot</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_or_create_bang_with_invalid_block">
            
              <b>test_first_or_create_bang_with_invalid_block</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_first_or_create_bang_with_invalid_block" name="method-i-test_first_or_create_bang_with_invalid_block" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_or_create_bang_with_invalid_block_source')" id="l_method-i-test_first_or_create_bang_with_invalid_block_source">show</a>
                
              </p>
              <div id="method-i-test_first_or_create_bang_with_invalid_block_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1035</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_or_create_bang_with_invalid_block</span>
  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordInvalid</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">bird</span><span class="ruby-operator">|</span> <span class="ruby-identifier">bird</span>.<span class="ruby-identifier">pirate_id</span> = <span class="ruby-number">1</span> }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_or_create_bang_with_invalid_options">
            
              <b>test_first_or_create_bang_with_invalid_options</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_first_or_create_bang_with_invalid_options" name="method-i-test_first_or_create_bang_with_invalid_options" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_or_create_bang_with_invalid_options_source')" id="l_method-i-test_first_or_create_bang_with_invalid_options_source">show</a>
                
              </p>
              <div id="method-i-test_first_or_create_bang_with_invalid_options_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1016</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_or_create_bang_with_invalid_options</span>
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordInvalid</span>) { <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create!</span>(<span class="ruby-value">:pirate_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_or_create_bang_with_no_parameters">
            
              <b>test_first_or_create_bang_with_no_parameters</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_first_or_create_bang_with_no_parameters" name="method-i-test_first_or_create_bang_with_no_parameters" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_or_create_bang_with_no_parameters_source')" id="l_method-i-test_first_or_create_bang_with_no_parameters_source">show</a>
                
              </p>
              <div id="method-i-test_first_or_create_bang_with_no_parameters_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1020</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_or_create_bang_with_no_parameters</span>
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordInvalid</span>) { <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create!</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_or_create_bang_with_valid_block">
            
              <b>test_first_or_create_bang_with_valid_block</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_first_or_create_bang_with_valid_block" name="method-i-test_first_or_create_bang_with_valid_block" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_or_create_bang_with_valid_block_source')" id="l_method-i-test_first_or_create_bang_with_valid_block_source">show</a>
                
              </p>
              <div id="method-i-test_first_or_create_bang_with_valid_block_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1024</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_or_create_bang_with_valid_block</span>
  <span class="ruby-identifier">parrot</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">bird</span><span class="ruby-operator">|</span> <span class="ruby-identifier">bird</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&#39;parrot&#39;</span> }
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">parrot</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;green&#39;</span>, <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">color</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;parrot&#39;</span>, <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">name</span>

  <span class="ruby-identifier">same_parrot</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">bird</span><span class="ruby-operator">|</span> <span class="ruby-identifier">bird</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&#39;parakeet&#39;</span> }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">parrot</span>, <span class="ruby-identifier">same_parrot</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_or_create_bang_with_valid_options">
            
              <b>test_first_or_create_bang_with_valid_options</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_first_or_create_bang_with_valid_options" name="method-i-test_first_or_create_bang_with_valid_options" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_or_create_bang_with_valid_options_source')" id="l_method-i-test_first_or_create_bang_with_valid_options_source">show</a>
                
              </p>
              <div id="method-i-test_first_or_create_bang_with_valid_options_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1003</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_or_create_bang_with_valid_options</span>
  <span class="ruby-identifier">parrot</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create!</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;parrot&#39;</span>)
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">parrot</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;parrot&#39;</span>, <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;green&#39;</span>, <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">color</span>

  <span class="ruby-identifier">same_parrot</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create!</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;parakeet&#39;</span>)
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">same_parrot</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">same_parrot</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">parrot</span>, <span class="ruby-identifier">same_parrot</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_or_create_with_array">
            
              <b>test_first_or_create_with_array</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_first_or_create_with_array" name="method-i-test_first_or_create_with_array" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_or_create_with_array_source')" id="l_method-i-test_first_or_create_with_array_source">show</a>
                
              </p>
              <div id="method-i-test_first_or_create_with_array_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 993</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_or_create_with_array</span>
  <span class="ruby-identifier">several_green_birds</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create</span>([{<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;parrot&#39;</span>}, {<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;parakeet&#39;</span>}])
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Array</span>, <span class="ruby-identifier">several_green_birds</span>
  <span class="ruby-identifier">several_green_birds</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">bird</span><span class="ruby-operator">|</span> <span class="ruby-identifier">assert</span> <span class="ruby-identifier">bird</span>.<span class="ruby-identifier">persisted?</span> }

  <span class="ruby-identifier">same_parrot</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create</span>([{<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;hummingbird&#39;</span>}, {<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;macaw&#39;</span>}])
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">same_parrot</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">several_green_birds</span>.<span class="ruby-identifier">first</span>, <span class="ruby-identifier">same_parrot</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_or_create_with_block">
            
              <b>test_first_or_create_with_block</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_first_or_create_with_block" name="method-i-test_first_or_create_with_block" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_or_create_with_block_source')" id="l_method-i-test_first_or_create_with_block_source">show</a>
                
              </p>
              <div id="method-i-test_first_or_create_with_block_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 982</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_or_create_with_block</span>
  <span class="ruby-identifier">parrot</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">bird</span><span class="ruby-operator">|</span> <span class="ruby-identifier">bird</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&#39;parrot&#39;</span> }
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">parrot</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;green&#39;</span>, <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">color</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;parrot&#39;</span>, <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">name</span>

  <span class="ruby-identifier">same_parrot</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">bird</span><span class="ruby-operator">|</span> <span class="ruby-identifier">bird</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&#39;parakeet&#39;</span> }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">parrot</span>, <span class="ruby-identifier">same_parrot</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_or_create_with_invalid_array">
            
              <b>test_first_or_create_with_invalid_array</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_first_or_create_with_invalid_array" name="method-i-test_first_or_create_with_invalid_array" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_or_create_with_invalid_array_source')" id="l_method-i-test_first_or_create_with_invalid_array_source">show</a>
                
              </p>
              <div id="method-i-test_first_or_create_with_invalid_array_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1051</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_or_create_with_invalid_array</span>
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordInvalid</span>) { <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create!</span>([ {<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;parrot&#39;</span>}, {<span class="ruby-value">:pirate_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span>} ]) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_or_create_with_no_parameters">
            
              <b>test_first_or_create_with_no_parameters</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_first_or_create_with_no_parameters" name="method-i-test_first_or_create_with_no_parameters" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_or_create_with_no_parameters_source')" id="l_method-i-test_first_or_create_with_no_parameters_source">show</a>
                
              </p>
              <div id="method-i-test_first_or_create_with_no_parameters_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 975</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_or_create_with_no_parameters</span>
  <span class="ruby-identifier">parrot</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">parrot</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;green&#39;</span>, <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">color</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_or_create_with_valid_array">
            
              <b>test_first_or_create_with_valid_array</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_first_or_create_with_valid_array" name="method-i-test_first_or_create_with_valid_array" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_or_create_with_valid_array_source')" id="l_method-i-test_first_or_create_with_valid_array_source">show</a>
                
              </p>
              <div id="method-i-test_first_or_create_with_valid_array_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1041</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_or_create_with_valid_array</span>
  <span class="ruby-identifier">several_green_birds</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create!</span>([{<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;parrot&#39;</span>}, {<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;parakeet&#39;</span>}])
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Array</span>, <span class="ruby-identifier">several_green_birds</span>
  <span class="ruby-identifier">several_green_birds</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">bird</span><span class="ruby-operator">|</span> <span class="ruby-identifier">assert</span> <span class="ruby-identifier">bird</span>.<span class="ruby-identifier">persisted?</span> }

  <span class="ruby-identifier">same_parrot</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create!</span>([{<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;hummingbird&#39;</span>}, {<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;macaw&#39;</span>}])
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">same_parrot</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">several_green_birds</span>.<span class="ruby-identifier">first</span>, <span class="ruby-identifier">same_parrot</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_or_initialize">
            
              <b>test_first_or_initialize</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_first_or_initialize" name="method-i-test_first_or_initialize" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_or_initialize_source')" id="l_method-i-test_first_or_initialize_source">show</a>
                
              </p>
              <div id="method-i-test_first_or_initialize_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1055</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_or_initialize</span>
  <span class="ruby-identifier">parrot</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_initialize</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;parrot&#39;</span>)
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">parrot</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">valid?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">new_record?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;parrot&#39;</span>, <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;green&#39;</span>, <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">color</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_or_initialize_with_block">
            
              <b>test_first_or_initialize_with_block</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_first_or_initialize_with_block" name="method-i-test_first_or_initialize_with_block" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_or_initialize_with_block_source')" id="l_method-i-test_first_or_initialize_with_block_source">show</a>
                
              </p>
              <div id="method-i-test_first_or_initialize_with_block_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1074</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_or_initialize_with_block</span>
  <span class="ruby-identifier">parrot</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_initialize</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">bird</span><span class="ruby-operator">|</span> <span class="ruby-identifier">bird</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&#39;parrot&#39;</span> }
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">parrot</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">valid?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">new_record?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;green&#39;</span>, <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">color</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;parrot&#39;</span>, <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_or_initialize_with_no_parameters">
            
              <b>test_first_or_initialize_with_no_parameters</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_first_or_initialize_with_no_parameters" name="method-i-test_first_or_initialize_with_no_parameters" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_or_initialize_with_no_parameters_source')" id="l_method-i-test_first_or_initialize_with_no_parameters_source">show</a>
                
              </p>
              <div id="method-i-test_first_or_initialize_with_no_parameters_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1065</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_or_initialize_with_no_parameters</span>
  <span class="ruby-identifier">parrot</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_initialize</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">parrot</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">valid?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">new_record?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;green&#39;</span>, <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">color</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_intersection_with_array">
            
              <b>test_intersection_with_array</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_intersection_with_array" name="method-i-test_intersection_with_array" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_intersection_with_array_source')" id="l_method-i-test_intersection_with_array_source">show</a>
                
              </p>
              <div id="method-i-test_intersection_with_array_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1190</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_intersection_with_array</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;David&quot;</span>)
  <span class="ruby-identifier">rails_author</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">first</span>

  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">rails_author</span>], [<span class="ruby-identifier">rails_author</span>] <span class="ruby-operator">&amp;</span> <span class="ruby-identifier">relation</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">rails_author</span>], <span class="ruby-identifier">relation</span> <span class="ruby-operator">&amp;</span> [<span class="ruby-identifier">rails_author</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_joins_with_nil_argument">
            
              <b>test_joins_with_nil_argument</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_joins_with_nil_argument" name="method-i-test_joins_with_nil_argument" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_joins_with_nil_argument_source')" id="l_method-i-test_joins_with_nil_argument_source">show</a>
                
              </p>
              <div id="method-i-test_joins_with_nil_argument_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 291</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_joins_with_nil_argument</span>
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">DependentFirm</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-keyword">nil</span>).<span class="ruby-identifier">first</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_joins_with_string_array">
            
              <b>test_joins_with_string_array</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_joins_with_string_array" name="method-i-test_joins_with_string_array" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_joins_with_string_array_source')" id="l_method-i-test_joins_with_string_array_source">show</a>
                
              </p>
              <div id="method-i-test_joins_with_string_array_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 315</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_joins_with_string_array</span>
  <span class="ruby-identifier">person_with_reader_and_post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">joins</span>([
      <span class="ruby-string">&quot;INNER JOIN categorizations ON categorizations.post_id = posts.id&quot;</span>,
      <span class="ruby-string">&quot;INNER JOIN categories ON categories.id = categorizations.category_id AND categories.type = &#39;SpecialCategory&#39;&quot;</span>
    ]
  ).<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">person_with_reader_and_post</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_last">
            
              <b>test_last</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_last" name="method-i-test_last" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_last_source')" id="l_method-i-test_last_source">show</a>
                
              </p>
              <div id="method-i-test_last_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 655</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_last</span>
  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">all</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">authors</span>(<span class="ruby-value">:bob</span>), <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">last</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_loaded_all">
            
              <b>test_loaded_all</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_loaded_all" name="method-i-test_loaded_all" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_loaded_all_source')" id="l_method-i-test_loaded_all_source">show</a>
                
              </p>
              <div id="method-i-test_loaded_all_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 87</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_loaded_all</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-number">2</span>.<span class="ruby-identifier">times</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">4</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span> }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_loaded_first">
            
              <b>test_loaded_first</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_loaded_first" name="method-i-test_loaded_first" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_loaded_first_source')" id="l_method-i-test_loaded_first_source">show</a>
                
              </p>
              <div id="method-i-test_loaded_first_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 107</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_loaded_first</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id ASC&#39;</span>)

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span> <span class="ruby-comment"># force load</span>
    <span class="ruby-number">2</span>.<span class="ruby-identifier">times</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;The First Topic&quot;</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span> }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_loading_with_one_association">
            
              <b>test_loading_with_one_association</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_loading_with_one_association" name="method-i-test_loading_with_one_association" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_loading_with_one_association_source')" id="l_method-i-test_loading_with_one_association_source">show</a>
                
              </p>
              <div id="method-i-test_loading_with_one_association_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 468</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_loading_with_one_association</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:comments</span>)
  <span class="ruby-identifier">post</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-number">1</span> }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">comments</span>(<span class="ruby-value">:greetings</span>))

  <span class="ruby-identifier">post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;posts.title = &#39;Welcome to the weblog&#39;&quot;</span>).<span class="ruby-identifier">preload</span>(<span class="ruby-value">:comments</span>).<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">comments</span>(<span class="ruby-value">:greetings</span>))

  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:last_comment</span>)
  <span class="ruby-identifier">post</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-number">1</span> }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">last_comment</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">last_comment</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_loading_with_one_association_with_non_preload">
            
              <b>test_loading_with_one_association_with_non_preload</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_loading_with_one_association_with_non_preload" name="method-i-test_loading_with_one_association_with_non_preload" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_loading_with_one_association_with_non_preload_source')" id="l_method-i-test_loading_with_one_association_with_non_preload_source">show</a>
                
              </p>
              <div id="method-i-test_loading_with_one_association_with_non_preload_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 483</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_loading_with_one_association_with_non_preload</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">eager_load</span>(<span class="ruby-value">:last_comment</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;comments.id DESC&#39;</span>)
  <span class="ruby-identifier">post</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-number">1</span> }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">last_comment</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">last_comment</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_many">
            
              <b>test_many</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_many" name="method-i-test_many" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_many_source')" id="l_method-i-test_many_source">show</a>
                
              </p>
              <div id="method-i-test_many_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 905</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_many</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">many?</span> <span class="ruby-comment"># Uses COUNT()</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">many?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span> }
    <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">many?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">&lt;</span> <span class="ruby-number">2</span> }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_many_with_limits">
            
              <b>test_many_with_limits</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_many_with_limits" name="method-i-test_many_with_limits" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_many_with_limits_source')" id="l_method-i-test_many_with_limits_source">show</a>
                
              </p>
              <div id="method-i-test_many_with_limits_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 917</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_many_with_limits</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">many?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">many?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_multi_where_ands_queries">
            
              <b>test_multi_where_ands_queries</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_multi_where_ands_queries" name="method-i-test_multi_where_ands_queries" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_multi_where_ands_queries_source')" id="l_method-i-test_multi_where_ands_queries_source">show</a>
                
              </p>
              <div id="method-i-test_multi_where_ands_queries_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 572</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_multi_where_ands_queries</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">unscoped</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">sql</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">name</span>).<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Santiago&#39;</span>).<span class="ruby-identifier">to_sql</span>
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-string">&#39;AND&#39;</span>, <span class="ruby-identifier">sql</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_multiple_selects">
            
              <b>test_multiple_selects</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_multiple_selects" name="method-i-test_multiple_selects" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_multiple_selects_source')" id="l_method-i-test_multiple_selects_source">show</a>
                
              </p>
              <div id="method-i-test_multiple_selects_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 805</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_multiple_selects</span>
  <span class="ruby-identifier">post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">&#39;comments_count&#39;</span>).<span class="ruby-identifier">select</span>(<span class="ruby-string">&#39;title&#39;</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;id ASC&quot;</span>).<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Welcome to the weblog&quot;</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">title</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments_count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_multivalue_where">
            
              <b>test_multivalue_where</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_multivalue_where" name="method-i-test_multivalue_where" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_multivalue_where_source')" id="l_method-i-test_multivalue_where_source">show</a>
                
              </p>
              <div id="method-i-test_multivalue_where_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 55</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_multivalue_where</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;author_id = ? AND id = ?&#39;</span>, <span class="ruby-number">1</span>, <span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_named_extension">
            
              <b>test_named_extension</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_named_extension" name="method-i-test_named_extension" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_named_extension_source')" id="l_method-i-test_named_extension_source">show</a>
                
              </p>
              <div id="method-i-test_named_extension_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1158</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_named_extension</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:author_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id ASC&#39;</span>).<span class="ruby-identifier">extending</span>(<span class="ruby-constant">Post</span><span class="ruby-operator">::</span><span class="ruby-constant">NamedExtension</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;lifo&quot;</span>, <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">author</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;lifo&quot;</span>, <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">author</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_no_arguments_to_query_methods_raise_errors">
            
              <b>test_no_arguments_to_query_methods_raise_errors</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_no_arguments_to_query_methods_raise_errors" name="method-i-test_no_arguments_to_query_methods_raise_errors" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_no_arguments_to_query_methods_raise_errors_source')" id="l_method-i-test_no_arguments_to_query_methods_raise_errors_source">show</a>
                
              </p>
              <div id="method-i-test_no_arguments_to_query_methods_raise_errors_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 324</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_no_arguments_to_query_methods_raise_errors</span>
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ArgumentError</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">references</span>() }
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ArgumentError</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">includes</span>() }
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ArgumentError</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">preload</span>() }
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ArgumentError</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">group</span>() }
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ArgumentError</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">reorder</span>() }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_none">
            
              <b>test_none</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_none" name="method-i-test_none" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_none_source')" id="l_method-i-test_none_source">show</a>
                
              </p>
              <div id="method-i-test_none_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 240</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_none</span>
  <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>
    <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">none</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_none_chainable">
            
              <b>test_none_chainable</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_none_chainable" name="method-i-test_none_chainable" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_none_chainable_source')" id="l_method-i-test_none_chainable_source">show</a>
                
              </p>
              <div id="method-i-test_none_chainable_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 247</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_none_chainable</span>
  <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;David&#39;</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_none_chainable_to_existing_scope_extension_method">
            
              <b>test_none_chainable_to_existing_scope_extension_method</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_none_chainable_to_existing_scope_extension_method" name="method-i-test_none_chainable_to_existing_scope_extension_method" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_none_chainable_to_existing_scope_extension_method_source')" id="l_method-i-test_none_chainable_to_existing_scope_extension_method_source">show</a>
                
              </p>
              <div id="method-i-test_none_chainable_to_existing_scope_extension_method_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 253</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_none_chainable_to_existing_scope_extension_method</span>
  <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">anonymous_extension</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">one</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_none_chained_to_methods_firing_queries_straight_to_db">
            
              <b>test_none_chained_to_methods_firing_queries_straight_to_db</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_none_chained_to_methods_firing_queries_straight_to_db" name="method-i-test_none_chained_to_methods_firing_queries_straight_to_db" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_none_chained_to_methods_firing_queries_straight_to_db_source')" id="l_method-i-test_none_chained_to_methods_firing_queries_straight_to_db_source">show</a>
                
              </p>
              <div id="method-i-test_none_chained_to_methods_firing_queries_straight_to_db_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 259</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_none_chained_to_methods_firing_queries_straight_to_db</span>
  <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_equal</span> [],    <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">pluck</span>(<span class="ruby-value">:id</span>) <span class="ruby-comment"># =&gt; uses select_all</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>,     <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">delete_all</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>,     <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;David&#39;</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>,     <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-number">1</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">false</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-number">1</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_null_relation_calculations_methods">
            
              <b>test_null_relation_calculations_methods</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_null_relation_calculations_methods" name="method-i-test_null_relation_calculations_methods" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_null_relation_calculations_methods_source')" id="l_method-i-test_null_relation_calculations_methods_source">show</a>
                
              </p>
              <div id="method-i-test_null_relation_calculations_methods_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 279</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_null_relation_calculations_methods</span>
  <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>,     <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">count</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">nil</span>,   <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">calculate</span>(<span class="ruby-value">:average</span>, <span class="ruby-string">&#39;salary&#39;</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_null_relation_content_size_methods">
            
              <b>test_null_relation_content_size_methods</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_null_relation_content_size_methods" name="method-i-test_null_relation_content_size_methods" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_null_relation_content_size_methods_source')" id="l_method-i-test_null_relation_content_size_methods_source">show</a>
                
              </p>
              <div id="method-i-test_null_relation_content_size_methods_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 269</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_null_relation_content_size_methods</span>
  <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>,     <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">size</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>,     <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">count</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">true</span>,  <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">false</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">any?</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">false</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">many?</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_null_relation_metadata_methods">
            
              <b>test_null_relation_metadata_methods</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_null_relation_metadata_methods" name="method-i-test_null_relation_metadata_methods" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_null_relation_metadata_methods_source')" id="l_method-i-test_null_relation_metadata_methods_source">show</a>
                
              </p>
              <div id="method-i-test_null_relation_metadata_methods_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 286</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_null_relation_metadata_methods</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;&quot;</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">to_sql</span>
  <span class="ruby-identifier">assert_equal</span>({}, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">where_values_hash</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_only">
            
              <b>test_only</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_only" name="method-i-test_only" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_only_source')" id="l_method-i-test_only_source">show</a>
                
              </p>
              <div id="method-i-test_only_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1136</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_only</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:author_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id ASC&#39;</span>).<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>)], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>

  <span class="ruby-identifier">author_posts</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">only</span>(<span class="ruby-value">:where</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:author_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span>).<span class="ruby-identifier">to_a</span>, <span class="ruby-identifier">author_posts</span>.<span class="ruby-identifier">to_a</span>

  <span class="ruby-identifier">all_posts</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">only</span>(<span class="ruby-value">:limit</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">first</span>, <span class="ruby-identifier">all_posts</span>.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_order_by_relation_attribute">
            
              <b>test_order_by_relation_attribute</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_order_by_relation_attribute" name="method-i-test_order_by_relation_attribute" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_order_by_relation_attribute_source')" id="l_method-i-test_order_by_relation_attribute_source">show</a>
                
              </p>
              <div id="method-i-test_order_by_relation_attribute_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1164</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_order_by_relation_attribute</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">order</span>(<span class="ruby-constant">Post</span>.<span class="ruby-identifier">arel_table</span>[<span class="ruby-value">:title</span>]).<span class="ruby-identifier">to_a</span>, <span class="ruby-constant">Post</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;title&quot;</span>).<span class="ruby-identifier">to_a</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_order_using_scoping">
            
              <b>test_order_using_scoping</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_order_using_scoping" name="method-i-test_order_using_scoping" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_order_using_scoping_source')" id="l_method-i-test_order_using_scoping_source">show</a>
                
              </p>
              <div id="method-i-test_order_using_scoping_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1173</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_order_using_scoping</span>
  <span class="ruby-identifier">car1</span> = <span class="ruby-constant">CoolCar</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id DESC&#39;</span>).<span class="ruby-identifier">scoping</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">CoolCar</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-value">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;id asc&#39;</span>).<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;honda&#39;</span>, <span class="ruby-identifier">car1</span>.<span class="ruby-identifier">name</span>

  <span class="ruby-identifier">car2</span> = <span class="ruby-constant">FastCar</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id DESC&#39;</span>).<span class="ruby-identifier">scoping</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">FastCar</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-value">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;id asc&#39;</span>).<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;honda&#39;</span>, <span class="ruby-identifier">car2</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_ordering_with_extra_spaces">
            
              <b>test_ordering_with_extra_spaces</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_ordering_with_extra_spaces" name="method-i-test_ordering_with_extra_spaces" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_ordering_with_extra_spaces_source')" id="l_method-i-test_ordering_with_extra_spaces_source">show</a>
                
              </p>
              <div id="method-i-test_ordering_with_extra_spaces_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1219</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_ordering_with_extra_spaces</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>), <span class="ruby-constant">Author</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id DESC , name DESC&#39;</span>).<span class="ruby-identifier">last</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_preload_applies_to_all_chained_preloaded_scopes">
            
              <b>test_preload_applies_to_all_chained_preloaded_scopes</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_preload_applies_to_all_chained_preloaded_scopes" name="method-i-test_preload_applies_to_all_chained_preloaded_scopes" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_preload_applies_to_all_chained_preloaded_scopes_source')" id="l_method-i-test_preload_applies_to_all_chained_preloaded_scopes_source">show</a>
                
              </p>
              <div id="method-i-test_preload_applies_to_all_chained_preloaded_scopes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 423</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_preload_applies_to_all_chained_preloaded_scopes</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">3</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">with_comments</span>.<span class="ruby-identifier">with_tags</span>.<span class="ruby-identifier">first</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">post</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_presence">
            
              <b>test_presence</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_presence" name="method-i-test_presence" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_presence_source')" id="l_method-i-test_presence_source">show</a>
                
              </p>
              <div id="method-i-test_presence_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1326</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_presence</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-comment"># the first query is triggered because there are no topics yet.</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) { <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">present?</span> }

  <span class="ruby-comment"># checking if there are topics is used before you actually display them,</span>
  <span class="ruby-comment"># thus it shouldn&#39;t invoke an extra count query.</span>
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">present?</span> }
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">topics</span>.<span class="ruby-identifier">blank?</span> }

  <span class="ruby-comment"># shows count of topics and loops after loading the query should not trigger extra queries either.</span>
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span> }
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">length</span> }
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">each</span> }

  <span class="ruby-comment"># count always trigger the COUNT query.</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) { <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">count</span> }

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_primary_key">
            
              <b>test_primary_key</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_primary_key" name="method-i-test_primary_key" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_primary_key_source')" id="l_method-i-test_primary_key_source">show</a>
                
              </p>
              <div id="method-i-test_primary_key_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1198</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_primary_key</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;id&quot;</span>, <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">primary_key</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_raising_exception_on_invalid_hash_params">
            
              <b>test_raising_exception_on_invalid_hash_params</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_raising_exception_on_invalid_hash_params" name="method-i-test_raising_exception_on_invalid_hash_params" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_raising_exception_on_invalid_hash_params_source')" id="l_method-i-test_raising_exception_on_invalid_hash_params_source">show</a>
                
              </p>
              <div id="method-i-test_raising_exception_on_invalid_hash_params_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 173</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_raising_exception_on_invalid_hash_params</span>
  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ArgumentError</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-value">:name</span>, <span class="ruby-string">&quot;id DESC&quot;</span>, <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:DeSc</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_references_doesnt_trigger_eager_loading_if_reference_not_included">
            
              <b>test_references_doesnt_trigger_eager_loading_if_reference_not_included</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_references_doesnt_trigger_eager_loading_if_reference_not_included" name="method-i-test_references_doesnt_trigger_eager_loading_if_reference_not_included" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_references_doesnt_trigger_eager_loading_if_reference_not_included_source')" id="l_method-i-test_references_doesnt_trigger_eager_loading_if_reference_not_included_source">show</a>
                
              </p>
              <div id="method-i-test_references_doesnt_trigger_eager_loading_if_reference_not_included_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1287</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_references_doesnt_trigger_eager_loading_if_reference_not_included</span>
  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">references</span>(<span class="ruby-value">:comments</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">scope</span>.<span class="ruby-identifier">eager_loading?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_references_triggers_eager_loading">
            
              <b>test_references_triggers_eager_loading</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_references_triggers_eager_loading" name="method-i-test_references_triggers_eager_loading" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_references_triggers_eager_loading_source')" id="l_method-i-test_references_triggers_eager_loading_source">show</a>
                
              </p>
              <div id="method-i-test_references_triggers_eager_loading_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1281</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_references_triggers_eager_loading</span>
  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:comments</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">scope</span>.<span class="ruby-identifier">eager_loading?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">references</span>(<span class="ruby-value">:comments</span>).<span class="ruby-identifier">eager_loading?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_relation_merging">
            
              <b>test_relation_merging</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_relation_merging" name="method-i-test_relation_merging" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_relation_merging_source')" id="l_method-i-test_relation_merging_source">show</a>
                
              </p>
              <div id="method-i-test_relation_merging_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 709</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_relation_merging</span>
  <span class="ruby-identifier">devs</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;salary &gt;= 80000&quot;</span>).<span class="ruby-identifier">merge</span>(<span class="ruby-constant">Developer</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">2</span>)).<span class="ruby-identifier">merge</span>(<span class="ruby-constant">Developer</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id ASC&#39;</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;id &lt; 3&quot;</span>))
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>), <span class="ruby-identifier">developers</span>(<span class="ruby-value">:jamis</span>)], <span class="ruby-identifier">devs</span>.<span class="ruby-identifier">to_a</span>

  <span class="ruby-identifier">dev_with_count</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">merge</span>(<span class="ruby-constant">Developer</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id DESC&#39;</span>)).<span class="ruby-identifier">merge</span>(<span class="ruby-constant">Developer</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">&#39;developers.*&#39;</span>))
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">developers</span>(<span class="ruby-value">:poor_jamis</span>)], <span class="ruby-identifier">dev_with_count</span>.<span class="ruby-identifier">to_a</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_relation_merging_with_arel_equalities_keeps_last_equality">
            
              <b>test_relation_merging_with_arel_equalities_keeps_last_equality</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_relation_merging_with_arel_equalities_keeps_last_equality" name="method-i-test_relation_merging_with_arel_equalities_keeps_last_equality" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_relation_merging_with_arel_equalities_keeps_last_equality_source')" id="l_method-i-test_relation_merging_with_arel_equalities_keeps_last_equality_source">show</a>
                
              </p>
              <div id="method-i-test_relation_merging_with_arel_equalities_keeps_last_equality_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 717</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_relation_merging_with_arel_equalities_keeps_last_equality</span>
  <span class="ruby-identifier">devs</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">where</span>(<span class="ruby-constant">Developer</span>.<span class="ruby-identifier">arel_table</span>[<span class="ruby-value">:salary</span>].<span class="ruby-identifier">eq</span>(<span class="ruby-number">80000</span>)).<span class="ruby-identifier">merge</span>(
    <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">where</span>(<span class="ruby-constant">Developer</span>.<span class="ruby-identifier">arel_table</span>[<span class="ruby-value">:salary</span>].<span class="ruby-identifier">eq</span>(<span class="ruby-number">9000</span>))
  )
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">developers</span>(<span class="ruby-value">:poor_jamis</span>)], <span class="ruby-identifier">devs</span>.<span class="ruby-identifier">to_a</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_relation_merging_with_arel_equalities_keeps_last_equality_with_non_attribute_left_hand">
            
              <b>test_relation_merging_with_arel_equalities_keeps_last_equality_with_non_attribute_left_hand</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_relation_merging_with_arel_equalities_keeps_last_equality_with_non_attribute_left_hand" name="method-i-test_relation_merging_with_arel_equalities_keeps_last_equality_with_non_attribute_left_hand" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_relation_merging_with_arel_equalities_keeps_last_equality_with_non_attribute_left_hand_source')" id="l_method-i-test_relation_merging_with_arel_equalities_keeps_last_equality_with_non_attribute_left_hand_source">show</a>
                
              </p>
              <div id="method-i-test_relation_merging_with_arel_equalities_keeps_last_equality_with_non_attribute_left_hand_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 724</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_relation_merging_with_arel_equalities_keeps_last_equality_with_non_attribute_left_hand</span>
  <span class="ruby-identifier">salary_attr</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">arel_table</span>[<span class="ruby-value">:salary</span>]
  <span class="ruby-identifier">devs</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">where</span>(
    <span class="ruby-constant">Arel</span><span class="ruby-operator">::</span><span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">NamedFunction</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;abs&#39;</span>, [<span class="ruby-identifier">salary_attr</span>]).<span class="ruby-identifier">eq</span>(<span class="ruby-number">80000</span>)
  ).<span class="ruby-identifier">merge</span>(
    <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">where</span>(
      <span class="ruby-constant">Arel</span><span class="ruby-operator">::</span><span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">NamedFunction</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;abs&#39;</span>, [<span class="ruby-identifier">salary_attr</span>]).<span class="ruby-identifier">eq</span>(<span class="ruby-number">9000</span>)
    )
  )
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">developers</span>(<span class="ruby-value">:poor_jamis</span>)], <span class="ruby-identifier">devs</span>.<span class="ruby-identifier">to_a</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_relation_merging_with_association">
            
              <b>test_relation_merging_with_association</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_relation_merging_with_association" name="method-i-test_relation_merging_with_association" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_relation_merging_with_association_source')" id="l_method-i-test_relation_merging_with_association_source">show</a>
                
              </p>
              <div id="method-i-test_relation_merging_with_association_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 763</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_relation_merging_with_association</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) <span class="ruby-keyword">do</span>  <span class="ruby-comment"># one for loading post, and another one merged query</span>
    <span class="ruby-identifier">post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Such a lovely day&#39;</span>).<span class="ruby-identifier">first</span>
    <span class="ruby-identifier">comments</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Thank you for the welcome&#39;</span>).<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_relation_merging_with_eager_load">
            
              <b>test_relation_merging_with_eager_load</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_relation_merging_with_eager_load" name="method-i-test_relation_merging_with_eager_load" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_relation_merging_with_eager_load_source')" id="l_method-i-test_relation_merging_with_eager_load_source">show</a>
                
              </p>
              <div id="method-i-test_relation_merging_with_eager_load_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 736</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_relation_merging_with_eager_load</span>
  <span class="ruby-identifier">relations</span> = []
  <span class="ruby-identifier">relations</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;comments.id DESC&#39;</span>).<span class="ruby-identifier">merge</span>(<span class="ruby-constant">Post</span>.<span class="ruby-identifier">eager_load</span>(<span class="ruby-value">:last_comment</span>)).<span class="ruby-identifier">merge</span>(<span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>)
  <span class="ruby-identifier">relations</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">eager_load</span>(<span class="ruby-value">:last_comment</span>).<span class="ruby-identifier">merge</span>(<span class="ruby-constant">Post</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;comments.id DESC&#39;</span>)).<span class="ruby-identifier">merge</span>(<span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>)

  <span class="ruby-identifier">relations</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">posts</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">post</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-number">1</span> }
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">last_comment</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">last_comment</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_relation_merging_with_joins">
            
              <b>test_relation_merging_with_joins</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_relation_merging_with_joins" name="method-i-test_relation_merging_with_joins" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_relation_merging_with_joins_source')" id="l_method-i-test_relation_merging_with_joins_source">show</a>
                
              </p>
              <div id="method-i-test_relation_merging_with_joins_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 758</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_relation_merging_with_joins</span>
  <span class="ruby-identifier">comments</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-value">:post</span>).<span class="ruby-identifier">where</span>(<span class="ruby-value">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Thank you for the welcome&#39;</span>).<span class="ruby-identifier">merge</span>(<span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Such a lovely day&#39;</span>))
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_relation_merging_with_locks">
            
              <b>test_relation_merging_with_locks</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_relation_merging_with_locks" name="method-i-test_relation_merging_with_locks" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_relation_merging_with_locks_source')" id="l_method-i-test_relation_merging_with_locks_source">show</a>
                
              </p>
              <div id="method-i-test_relation_merging_with_locks_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 747</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_relation_merging_with_locks</span>
  <span class="ruby-identifier">devs</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">lock</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;salary &gt;= 80000&quot;</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;id DESC&quot;</span>).<span class="ruby-identifier">merge</span>(<span class="ruby-constant">Developer</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">2</span>))
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">devs</span>.<span class="ruby-identifier">locked</span>.<span class="ruby-identifier">present?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_relation_merging_with_preload">
            
              <b>test_relation_merging_with_preload</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_relation_merging_with_preload" name="method-i-test_relation_merging_with_preload" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_relation_merging_with_preload_source')" id="l_method-i-test_relation_merging_with_preload_source">show</a>
                
              </p>
              <div id="method-i-test_relation_merging_with_preload_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 752</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_relation_merging_with_preload</span>
  [<span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-constant">Post</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:author</span>)), <span class="ruby-constant">Post</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:author</span>).<span class="ruby-identifier">merge</span>(<span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>)].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">posts</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) { <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">author</span> }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_reload">
            
              <b>test_reload</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_reload" name="method-i-test_reload" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_reload_source')" id="l_method-i-test_reload_source">show</a>
                
              </p>
              <div id="method-i-test_reload_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 118</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_reload</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-number">2</span>.<span class="ruby-identifier">times</span> { <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span> }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">original_size</span> = <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create!</span> <span class="ruby-value">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;fake&#39;</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) { <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">reload</span> }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">original_size</span> <span class="ruby-operator">+</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_respond_to_class_methods_and_scopes">
            
              <b>test_respond_to_class_methods_and_scopes</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_respond_to_class_methods_and_scopes" name="method-i-test_respond_to_class_methods_and_scopes" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_respond_to_class_methods_and_scopes_source')" id="l_method-i-test_respond_to_class_methods_and_scopes_source">show</a>
                
              </p>
              <div id="method-i-test_respond_to_class_methods_and_scopes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 375</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_respond_to_class_methods_and_scopes</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:by_lifo</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_respond_to_delegates_to_relation">
            
              <b>test_respond_to_delegates_to_relation</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_respond_to_delegates_to_relation" name="method-i-test_respond_to_delegates_to_relation" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_respond_to_delegates_to_relation_source')" id="l_method-i-test_respond_to_delegates_to_relation_source">show</a>
                
              </p>
              <div id="method-i-test_respond_to_delegates_to_relation_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 348</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_respond_to_delegates_to_relation</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>
  <span class="ruby-identifier">fake_arel</span> = <span class="ruby-constant">Struct</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:responds</span>) {
    <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">respond_to?</span> <span class="ruby-identifier">method</span>, <span class="ruby-identifier">access</span> = <span class="ruby-keyword">false</span>
      <span class="ruby-identifier">responds</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">method</span>, <span class="ruby-identifier">access</span>]
    <span class="ruby-keyword">end</span>
  }.<span class="ruby-identifier">new</span> []

  <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">extend</span>(<span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">attr_accessor</span> <span class="ruby-value">:arel</span> })
  <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">arel</span> = <span class="ruby-identifier">fake_arel</span>

  <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:matching_attributes</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">:matching_attributes</span>, <span class="ruby-keyword">false</span>], <span class="ruby-identifier">fake_arel</span>.<span class="ruby-identifier">responds</span>.<span class="ruby-identifier">first</span>

  <span class="ruby-identifier">fake_arel</span>.<span class="ruby-identifier">responds</span> = []
  <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:matching_attributes</span>, <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">:matching_attributes</span>, <span class="ruby-keyword">true</span>], <span class="ruby-identifier">fake_arel</span>.<span class="ruby-identifier">responds</span>.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_respond_to_dynamic_finders">
            
              <b>test_respond_to_dynamic_finders</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_respond_to_dynamic_finders" name="method-i-test_respond_to_dynamic_finders" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_respond_to_dynamic_finders_source')" id="l_method-i-test_respond_to_dynamic_finders_source">show</a>
                
              </p>
              <div id="method-i-test_respond_to_dynamic_finders_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 367</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_respond_to_dynamic_finders</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>

  [<span class="ruby-string">&quot;find_by_title&quot;</span>, <span class="ruby-string">&quot;find_by_title_and_author_name&quot;</span>, <span class="ruby-string">&quot;find_or_create_by_title&quot;</span>, <span class="ruby-string">&quot;find_or_initialize_by_title_and_author_name&quot;</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">method</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">assert_respond_to</span> <span class="ruby-identifier">relation</span>, <span class="ruby-identifier">method</span>, <span class="ruby-node">&quot;Topic.all should respond to #{method.inspect}&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scoped">
            
              <b>test_scoped</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_scoped" name="method-i-test_scoped" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scoped_source')" id="l_method-i-test_scoped_source">show</a>
                
              </p>
              <div id="method-i-test_scoped_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 60</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scoped</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Relation</span>, <span class="ruby-identifier">topics</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">4</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scoped_all">
            
              <b>test_scoped_all</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_scoped_all" name="method-i-test_scoped_all" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scoped_all_source')" id="l_method-i-test_scoped_all_source">show</a>
                
              </p>
              <div id="method-i-test_scoped_all_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 81</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scoped_all</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Array</span>, <span class="ruby-identifier">topics</span>
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">4</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scoped_build">
            
              <b>test_scoped_build</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_scoped_build" name="method-i-test_scoped_build" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scoped_build_source')" id="l_method-i-test_scoped_build_source">show</a>
                
              </p>
              <div id="method-i-test_scoped_build_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 931</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scoped_build</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;You told a lie&#39;</span>)

  <span class="ruby-identifier">post</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Post</span>, <span class="ruby-identifier">post</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;You told a lie&#39;</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">title</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scoped_first">
            
              <b>test_scoped_first</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_scoped_first" name="method-i-test_scoped_first" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scoped_first_source')" id="l_method-i-test_scoped_first_source">show</a>
                
              </p>
              <div id="method-i-test_scoped_first_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 97</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scoped_first</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id ASC&#39;</span>)

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-number">2</span>.<span class="ruby-identifier">times</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;The First Topic&quot;</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span> }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scoped_responds_to_delegated_methods">
            
              <b>test_scoped_responds_to_delegated_methods</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_scoped_responds_to_delegated_methods" name="method-i-test_scoped_responds_to_delegated_methods" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scoped_responds_to_delegated_methods_source')" id="l_method-i-test_scoped_responds_to_delegated_methods_source">show</a>
                
              </p>
              <div id="method-i-test_scoped_responds_to_delegated_methods_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 340</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scoped_responds_to_delegated_methods</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>

  [<span class="ruby-string">&quot;map&quot;</span>, <span class="ruby-string">&quot;uniq&quot;</span>, <span class="ruby-string">&quot;sort&quot;</span>, <span class="ruby-string">&quot;insert&quot;</span>, <span class="ruby-string">&quot;delete&quot;</span>, <span class="ruby-string">&quot;update&quot;</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">method</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">assert_respond_to</span> <span class="ruby-identifier">relation</span>, <span class="ruby-identifier">method</span>, <span class="ruby-node">&quot;Topic.all should respond to #{method.inspect}&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_select_argument_error">
            
              <b>test_select_argument_error</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_select_argument_error" name="method-i-test_select_argument_error" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_select_argument_error_source')" id="l_method-i-test_select_argument_error_source">show</a>
                
              </p>
              <div id="method-i-test_select_argument_error_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 705</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_select_argument_error</span>
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ArgumentError</span>) { <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">select</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_select_takes_a_variable_list_of_args">
            
              <b>test_select_takes_a_variable_list_of_args</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_select_takes_a_variable_list_of_args" name="method-i-test_select_takes_a_variable_list_of_args" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_select_takes_a_variable_list_of_args_source')" id="l_method-i-test_select_takes_a_variable_list_of_args_source">show</a>
                
              </p>
              <div id="method-i-test_select_takes_a_variable_list_of_args_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 697</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_select_takes_a_variable_list_of_args</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>)

  <span class="ruby-identifier">developer</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">select</span>(<span class="ruby-value">:name</span>, <span class="ruby-value">:salary</span>).<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">salary</span>, <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">salary</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_select_with_block">
            
              <b>test_select_with_block</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_select_with_block" name="method-i-test_select_with_block" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_select_with_block_source')" id="l_method-i-test_select_with_block_source">show</a>
                
              </p>
              <div id="method-i-test_select_with_block_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 235</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_select_with_block</span>
  <span class="ruby-identifier">even_ids</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">select</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">%</span> <span class="ruby-number">2</span> <span class="ruby-operator">==</span> <span class="ruby-number">0</span> }.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-number">2</span>, <span class="ruby-number">4</span>, <span class="ruby-number">6</span>, <span class="ruby-number">8</span>, <span class="ruby-number">10</span>], <span class="ruby-identifier">even_ids</span>.<span class="ruby-identifier">sort</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_size">
            
              <b>test_size</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_size" name="method-i-test_size" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_size_source')" id="l_method-i-test_size_source">show</a>
                
              </p>
              <div id="method-i-test_size_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 811</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_size</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) { <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">11</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">best_posts</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:comments_count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>)
  <span class="ruby-identifier">best_posts</span>.<span class="ruby-identifier">to_a</span> <span class="ruby-comment"># force load</span>
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">9</span>, <span class="ruby-identifier">best_posts</span>.<span class="ruby-identifier">size</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_size_with_limit">
            
              <b>test_size_with_limit</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_size_with_limit" name="method-i-test_size_with_limit" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_size_with_limit_source')" id="l_method-i-test_size_with_limit_source">show</a>
                
              </p>
              <div id="method-i-test_size_with_limit_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 822</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_size_with_limit</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">10</span>)

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) { <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">10</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">best_posts</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:comments_count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>)
  <span class="ruby-identifier">best_posts</span>.<span class="ruby-identifier">to_a</span> <span class="ruby-comment"># force load</span>
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">9</span>, <span class="ruby-identifier">best_posts</span>.<span class="ruby-identifier">size</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_size_with_zero_limit">
            
              <b>test_size_with_zero_limit</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_size_with_zero_limit" name="method-i-test_size_with_zero_limit" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_size_with_zero_limit_source')" id="l_method-i-test_size_with_zero_limit_source">show</a>
                
              </p>
              <div id="method-i-test_size_with_zero_limit_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 833</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_size_with_zero_limit</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">0</span>)

  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">to_a</span> <span class="ruby-comment"># force load</span>
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_to_json">
            
              <b>test_to_json</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_to_json" name="method-i-test_to_json" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_to_json_source')" id="l_method-i-test_to_json_source">show</a>
                
              </p>
              <div id="method-i-test_to_json_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 66</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_to_json</span>
  <span class="ruby-identifier">assert_nothing_raised</span>  { <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_json</span> }
  <span class="ruby-identifier">assert_nothing_raised</span>  { <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">to_json</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_to_xml">
            
              <b>test_to_xml</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_to_xml" name="method-i-test_to_xml" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_to_xml_source')" id="l_method-i-test_to_xml_source">show</a>
                
              </p>
              <div id="method-i-test_to_xml_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 76</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_to_xml</span>
  <span class="ruby-identifier">assert_nothing_raised</span>  { <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_xml</span> }
  <span class="ruby-identifier">assert_nothing_raised</span>  { <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">to_xml</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_to_yaml">
            
              <b>test_to_yaml</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_to_yaml" name="method-i-test_to_yaml" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_to_yaml_source')" id="l_method-i-test_to_yaml_source">show</a>
                
              </p>
              <div id="method-i-test_to_yaml_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 71</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_to_yaml</span>
  <span class="ruby-identifier">assert_nothing_raised</span>  { <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_yaml</span> }
  <span class="ruby-identifier">assert_nothing_raised</span>  { <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">to_yaml</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_two_scopes_with_includes_should_not_drop_any_include">
            
              <b>test_two_scopes_with_includes_should_not_drop_any_include</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_two_scopes_with_includes_should_not_drop_any_include" name="method-i-test_two_scopes_with_includes_should_not_drop_any_include" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_two_scopes_with_includes_should_not_drop_any_include_source')" id="l_method-i-test_two_scopes_with_includes_should_not_drop_any_include_source">show</a>
                
              </p>
              <div id="method-i-test_two_scopes_with_includes_should_not_drop_any_include_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 44</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_two_scopes_with_includes_should_not_drop_any_include</span>
  <span class="ruby-identifier">car</span> = <span class="ruby-constant">Car</span>.<span class="ruby-identifier">incl_engines</span>.<span class="ruby-identifier">incl_tyres</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">car</span>.<span class="ruby-identifier">tyres</span>.<span class="ruby-identifier">length</span> }
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">car</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">length</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_uniq">
            
              <b>test_uniq</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_uniq" name="method-i-test_uniq" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_uniq_source')" id="l_method-i-test_uniq_source">show</a>
                
              </p>
              <div id="method-i-test_uniq_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1265</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_uniq</span>
  <span class="ruby-identifier">tag1</span> = <span class="ruby-constant">Tag</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Foo&#39;</span>)
  <span class="ruby-identifier">tag2</span> = <span class="ruby-constant">Tag</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Foo&#39;</span>)

  <span class="ruby-identifier">query</span> = <span class="ruby-constant">Tag</span>.<span class="ruby-identifier">select</span>(<span class="ruby-value">:name</span>).<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">tag1</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">tag2</span>.<span class="ruby-identifier">id</span>])

  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;Foo&#39;</span>, <span class="ruby-string">&#39;Foo&#39;</span>], <span class="ruby-identifier">query</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:name</span>)
  <span class="ruby-identifier">assert_sql</span>(<span class="ruby-regexp">/DISTINCT/</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;Foo&#39;</span>], <span class="ruby-identifier">query</span>.<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:name</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_sql</span>(<span class="ruby-regexp">/DISTINCT/</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;Foo&#39;</span>], <span class="ruby-identifier">query</span>.<span class="ruby-identifier">uniq</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:name</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;Foo&#39;</span>, <span class="ruby-string">&#39;Foo&#39;</span>], <span class="ruby-identifier">query</span>.<span class="ruby-identifier">uniq</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">uniq</span>(<span class="ruby-keyword">false</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:name</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_unscoped_block_style">
            
              <b>test_unscoped_block_style</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_unscoped_block_style" name="method-i-test_unscoped_block_style" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_unscoped_block_style_source')" id="l_method-i-test_unscoped_block_style_source">show</a>
                
              </p>
              <div id="method-i-test_unscoped_block_style_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1185</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_unscoped_block_style</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;honda&#39;</span>, <span class="ruby-constant">CoolCar</span>.<span class="ruby-identifier">unscoped</span> { <span class="ruby-constant">CoolCar</span>.<span class="ruby-identifier">order_using_new_style</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>}
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;honda&#39;</span>, <span class="ruby-constant">FastCar</span>.<span class="ruby-identifier">unscoped</span> { <span class="ruby-constant">FastCar</span>.<span class="ruby-identifier">order_using_new_style</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>}
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_update_all_with_blank_argument">
            
              <b>test_update_all_with_blank_argument</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_update_all_with_blank_argument" name="method-i-test_update_all_with_blank_argument" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_update_all_with_blank_argument_source')" id="l_method-i-test_update_all_with_blank_argument_source">show</a>
                
              </p>
              <div id="method-i-test_update_all_with_blank_argument_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1223</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_update_all_with_blank_argument</span>
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ArgumentError</span>) { <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">update_all</span>({}) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_update_all_with_joins">
            
              <b>test_update_all_with_joins</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_update_all_with_joins" name="method-i-test_update_all_with_joins" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_update_all_with_joins_source')" id="l_method-i-test_update_all_with_joins_source">show</a>
                
              </p>
              <div id="method-i-test_update_all_with_joins_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1227</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_update_all_with_joins</span>
  <span class="ruby-identifier">comments</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-value">:post</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;posts.id&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">count</span>    = <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">count</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">count</span>, <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-value">:post_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:thinking</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:thinking</span>), <span class="ruby-identifier">comments</span>(<span class="ruby-value">:greetings</span>).<span class="ruby-identifier">post</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_update_all_with_joins_and_limit">
            
              <b>test_update_all_with_joins_and_limit</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_update_all_with_joins_and_limit" name="method-i-test_update_all_with_joins_and_limit" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_update_all_with_joins_and_limit_source')" id="l_method-i-test_update_all_with_joins_and_limit_source">show</a>
                
              </p>
              <div id="method-i-test_update_all_with_joins_and_limit_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1235</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_update_all_with_joins_and_limit</span>
  <span class="ruby-identifier">comments</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-value">:post</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;posts.id&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>).<span class="ruby-identifier">id</span>).<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-value">:post_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:thinking</span>).<span class="ruby-identifier">id</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_update_all_with_joins_and_limit_and_order">
            
              <b>test_update_all_with_joins_and_limit_and_order</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_update_all_with_joins_and_limit_and_order" name="method-i-test_update_all_with_joins_and_limit_and_order" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_update_all_with_joins_and_limit_and_order_source')" id="l_method-i-test_update_all_with_joins_and_limit_and_order_source">show</a>
                
              </p>
              <div id="method-i-test_update_all_with_joins_and_limit_and_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1240</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_update_all_with_joins_and_limit_and_order</span>
  <span class="ruby-identifier">comments</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-value">:post</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;posts.id&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>).<span class="ruby-identifier">id</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;comments.id&#39;</span>).<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-value">:post_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:thinking</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:thinking</span>), <span class="ruby-identifier">comments</span>(<span class="ruby-value">:greetings</span>).<span class="ruby-identifier">post</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>),  <span class="ruby-identifier">comments</span>(<span class="ruby-value">:more_greetings</span>).<span class="ruby-identifier">post</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_update_all_with_joins_and_offset">
            
              <b>test_update_all_with_joins_and_offset</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_update_all_with_joins_and_offset" name="method-i-test_update_all_with_joins_and_offset" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_update_all_with_joins_and_offset_source')" id="l_method-i-test_update_all_with_joins_and_offset_source">show</a>
                
              </p>
              <div id="method-i-test_update_all_with_joins_and_offset_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1247</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_update_all_with_joins_and_offset</span>
  <span class="ruby-identifier">all_comments</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-value">:post</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;posts.id&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">count</span>        = <span class="ruby-identifier">all_comments</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">comments</span>     = <span class="ruby-identifier">all_comments</span>.<span class="ruby-identifier">offset</span>(<span class="ruby-number">1</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">count</span> <span class="ruby-operator">-</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-value">:post_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:thinking</span>).<span class="ruby-identifier">id</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_update_all_with_joins_and_offset_and_order">
            
              <b>test_update_all_with_joins_and_offset_and_order</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_update_all_with_joins_and_offset_and_order" name="method-i-test_update_all_with_joins_and_offset_and_order" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_update_all_with_joins_and_offset_and_order_source')" id="l_method-i-test_update_all_with_joins_and_offset_and_order_source">show</a>
                
              </p>
              <div id="method-i-test_update_all_with_joins_and_offset_and_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 1255</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_update_all_with_joins_and_offset_and_order</span>
  <span class="ruby-identifier">all_comments</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-value">:post</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;posts.id&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>).<span class="ruby-identifier">id</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;posts.id&#39;</span>, <span class="ruby-string">&#39;comments.id&#39;</span>)
  <span class="ruby-identifier">count</span>        = <span class="ruby-identifier">all_comments</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">comments</span>     = <span class="ruby-identifier">all_comments</span>.<span class="ruby-identifier">offset</span>(<span class="ruby-number">1</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">count</span> <span class="ruby-operator">-</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-value">:post_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:thinking</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:thinking</span>), <span class="ruby-identifier">comments</span>(<span class="ruby-value">:more_greetings</span>).<span class="ruby-identifier">post</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>),  <span class="ruby-identifier">comments</span>(<span class="ruby-value">:greetings</span>).<span class="ruby-identifier">post</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_where_with_ar_object">
            
              <b>test_where_with_ar_object</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_where_with_ar_object" name="method-i-test_where_with_ar_object" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_where_with_ar_object_source')" id="l_method-i-test_where_with_ar_object_source">show</a>
                
              </p>
              <div id="method-i-test_where_with_ar_object_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relations_test.rb, line 538</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_where_with_ar_object</span>
  <span class="ruby-identifier">author</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">author</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>

    </div>
  </body>
</html>    