<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>DefaultScopingTest</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/github.css" type="text/css" media="screen" />
<script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            DefaultScopingTest 
            
                <span class="parent">&lt; 
                    
                    ActiveRecord::TestCase
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/rails/activerecord/test/cases/relation_scoping_test_rb.html">rails/activerecord/test/cases/relation_scoping_test.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-test_create_attribute_overwrites_default_scoping">test_create_attribute_overwrites_default_scoping</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_create_attribute_overwrites_default_values">test_create_attribute_overwrites_default_values</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_create_with_empty_hash_will_not_reset">test_create_with_empty_hash_will_not_reset</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_create_with_merge">test_create_with_merge</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_create_with_reset">test_create_with_reset</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope">test_default_scope</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_as_block_referencing_scope">test_default_scope_as_block_referencing_scope</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_as_class_method">test_default_scope_as_class_method</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_as_class_method_referencing_scope">test_default_scope_as_class_method_referencing_scope</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_attribute">test_default_scope_attribute</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_find_last">test_default_scope_find_last</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_include_with_count">test_default_scope_include_with_count</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_is_threadsafe">test_default_scope_is_threadsafe</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_is_unscoped_on_create">test_default_scope_is_unscoped_on_create</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_is_unscoped_on_find">test_default_scope_is_unscoped_on_find</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_order_ignored_by_aggregations">test_default_scope_order_ignored_by_aggregations</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_select_ignored_by_aggregations">test_default_scope_select_ignored_by_aggregations</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_select_ignored_by_grouped_aggregations">test_default_scope_select_ignored_by_grouped_aggregations</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_with_block">test_default_scope_with_block</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_with_callable">test_default_scope_with_callable</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_with_conditions_hash">test_default_scope_with_conditions_hash</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_with_conditions_string">test_default_scope_with_conditions_string</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_with_inheritance">test_default_scope_with_inheritance</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_with_lambda">test_default_scope_with_lambda</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_with_module_includes">test_default_scope_with_module_includes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_with_multiple_calls">test_default_scope_with_multiple_calls</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scoping_with_threads">test_default_scoping_with_threads</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_order_after_reorder_combines_orders">test_order_after_reorder_combines_orders</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_order_in_default_scope_should_not_prevail">test_order_in_default_scope_should_not_prevail</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_reorder_overrides_default_scope_order">test_reorder_overrides_default_scope_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scope_composed_by_limit_and_then_offset_is_equal_to_scope_composed_by_offset_and_then_limit">test_scope_composed_by_limit_and_then_offset_is_equal_to_scope_composed_by_offset_and_then_limit</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scope_overwrites_default">test_scope_overwrites_default</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_unscoped_with_named_scope_should_not_have_default_scope">test_unscoped_with_named_scope_should_not_have_default_scope</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_where_attribute">test_where_attribute</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_where_attribute_merge">test_where_attribute_merge</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    


    <!-- Methods -->
        
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-test_create_attribute_overwrites_default_scoping">
            
              <b>test_create_attribute_overwrites_default_scoping</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_create_attribute_overwrites_default_scoping" name="method-i-test_create_attribute_overwrites_default_scoping" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_create_attribute_overwrites_default_scoping_source')" id="l_method-i-test_create_attribute_overwrites_default_scoping_source">show</a>
                
              </p>
              <div id="method-i-test_create_attribute_overwrites_default_scoping_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 433</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_create_attribute_overwrites_default_scoping</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;David&#39;</span>, <span class="ruby-constant">PoorDeveloperCalledJamis</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;David&#39;</span>).<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">200000</span>, <span class="ruby-constant">PoorDeveloperCalledJamis</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;David&#39;</span>, <span class="ruby-value">:salary</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">200000</span>).<span class="ruby-identifier">salary</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_create_attribute_overwrites_default_values">
            
              <b>test_create_attribute_overwrites_default_values</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_create_attribute_overwrites_default_values" name="method-i-test_create_attribute_overwrites_default_values" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_create_attribute_overwrites_default_values_source')" id="l_method-i-test_create_attribute_overwrites_default_values_source">show</a>
                
              </p>
              <div id="method-i-test_create_attribute_overwrites_default_values_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 438</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_create_attribute_overwrites_default_values</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">nil</span>, <span class="ruby-constant">PoorDeveloperCalledJamis</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-value">:salary</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>).<span class="ruby-identifier">salary</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">50000</span>, <span class="ruby-constant">PoorDeveloperCalledJamis</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;David&#39;</span>).<span class="ruby-identifier">salary</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_create_with_empty_hash_will_not_reset">
            
              <b>test_create_with_empty_hash_will_not_reset</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_create_with_empty_hash_will_not_reset" name="method-i-test_create_with_empty_hash_will_not_reset" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>FIXME: I don&#39;t know if this is <strong>desired</strong> behavior, but
it is *today&#39;s* behavior.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_create_with_empty_hash_will_not_reset_source')" id="l_method-i-test_create_with_empty_hash_will_not_reset_source">show</a>
                
              </p>
              <div id="method-i-test_create_with_empty_hash_will_not_reset_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 484</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_create_with_empty_hash_will_not_reset</span>
  <span class="ruby-identifier">jamis</span> = <span class="ruby-constant">PoorDeveloperCalledJamis</span>.<span class="ruby-identifier">create_with</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Aaron&#39;</span>).<span class="ruby-identifier">create_with</span>({}).<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;Aaron&#39;</span>, <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_create_with_merge">
            
              <b>test_create_with_merge</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_create_with_merge" name="method-i-test_create_with_merge" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_create_with_merge_source')" id="l_method-i-test_create_with_merge_source">show</a>
                
              </p>
              <div id="method-i-test_create_with_merge_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 465</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_create_with_merge</span>
  <span class="ruby-identifier">aaron</span> = <span class="ruby-constant">PoorDeveloperCalledJamis</span>.<span class="ruby-identifier">create_with</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;foo&#39;</span>, <span class="ruby-value">:salary</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">20</span>).<span class="ruby-identifier">merge</span>(
            <span class="ruby-constant">PoorDeveloperCalledJamis</span>.<span class="ruby-identifier">create_with</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Aaron&#39;</span>)).<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">20</span>, <span class="ruby-identifier">aaron</span>.<span class="ruby-identifier">salary</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;Aaron&#39;</span>, <span class="ruby-identifier">aaron</span>.<span class="ruby-identifier">name</span>

  <span class="ruby-identifier">aaron</span> = <span class="ruby-constant">PoorDeveloperCalledJamis</span>.<span class="ruby-identifier">create_with</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;foo&#39;</span>, <span class="ruby-value">:salary</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">20</span>).
                                   <span class="ruby-identifier">create_with</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Aaron&#39;</span>).<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">20</span>, <span class="ruby-identifier">aaron</span>.<span class="ruby-identifier">salary</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;Aaron&#39;</span>, <span class="ruby-identifier">aaron</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_create_with_reset">
            
              <b>test_create_with_reset</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_create_with_reset" name="method-i-test_create_with_reset" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_create_with_reset_source')" id="l_method-i-test_create_with_reset_source">show</a>
                
              </p>
              <div id="method-i-test_create_with_reset_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 477</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_create_with_reset</span>
  <span class="ruby-identifier">jamis</span> = <span class="ruby-constant">PoorDeveloperCalledJamis</span>.<span class="ruby-identifier">create_with</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Aaron&#39;</span>).<span class="ruby-identifier">create_with</span>(<span class="ruby-keyword">nil</span>).<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;Jamis&#39;</span>, <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope">
            
              <b>test_default_scope</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_default_scope" name="method-i-test_default_scope" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_source')" id="l_method-i-test_default_scope_source">show</a>
                
              </p>
              <div id="method-i-test_default_scope_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 336</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope</span>
  <span class="ruby-identifier">expected</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-value">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;salary DESC&#39;</span>).<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">dev</span><span class="ruby-operator">|</span> <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">salary</span> }
  <span class="ruby-identifier">received</span> = <span class="ruby-constant">DeveloperOrderedBySalary</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">dev</span><span class="ruby-operator">|</span> <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">salary</span> }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">received</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_as_block_referencing_scope">
            
              <b>test_default_scope_as_block_referencing_scope</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_default_scope_as_block_referencing_scope" name="method-i-test_default_scope_as_block_referencing_scope" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_as_block_referencing_scope_source')" id="l_method-i-test_default_scope_as_block_referencing_scope_source">show</a>
                
              </p>
              <div id="method-i-test_default_scope_as_block_referencing_scope_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 350</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_as_block_referencing_scope</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">becomes</span>(<span class="ruby-constant">LazyBlockReferencingScopeDeveloperCalledDavid</span>)], <span class="ruby-constant">LazyBlockReferencingScopeDeveloperCalledDavid</span>.<span class="ruby-identifier">all</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_as_class_method">
            
              <b>test_default_scope_as_class_method</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_default_scope_as_class_method" name="method-i-test_default_scope_as_class_method" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_as_class_method_source')" id="l_method-i-test_default_scope_as_class_method_source">show</a>
                
              </p>
              <div id="method-i-test_default_scope_as_class_method_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 342</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_as_class_method</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">becomes</span>(<span class="ruby-constant">ClassMethodDeveloperCalledDavid</span>)], <span class="ruby-constant">ClassMethodDeveloperCalledDavid</span>.<span class="ruby-identifier">all</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_as_class_method_referencing_scope">
            
              <b>test_default_scope_as_class_method_referencing_scope</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_default_scope_as_class_method_referencing_scope" name="method-i-test_default_scope_as_class_method_referencing_scope" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_as_class_method_referencing_scope_source')" id="l_method-i-test_default_scope_as_class_method_referencing_scope_source">show</a>
                
              </p>
              <div id="method-i-test_default_scope_as_class_method_referencing_scope_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 346</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_as_class_method_referencing_scope</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">becomes</span>(<span class="ruby-constant">ClassMethodReferencingScopeDeveloperCalledDavid</span>)], <span class="ruby-constant">ClassMethodReferencingScopeDeveloperCalledDavid</span>.<span class="ruby-identifier">all</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_attribute">
            
              <b>test_default_scope_attribute</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_default_scope_attribute" name="method-i-test_default_scope_attribute" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_attribute_source')" id="l_method-i-test_default_scope_attribute_source">show</a>
                
              </p>
              <div id="method-i-test_default_scope_attribute_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 443</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_attribute</span>
  <span class="ruby-identifier">jamis</span> = <span class="ruby-constant">PoorDeveloperCalledJamis</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;David&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">50000</span>, <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">salary</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_find_last">
            
              <b>test_default_scope_find_last</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_default_scope_find_last" name="method-i-test_default_scope_find_last" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_find_last_source')" id="l_method-i-test_default_scope_find_last_source">show</a>
                
              </p>
              <div id="method-i-test_default_scope_find_last_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 509</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_find_last</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">DeveloperOrderedBySalary</span>.<span class="ruby-identifier">count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span>, <span class="ruby-string">&quot;need more than one row for test&quot;</span>

  <span class="ruby-identifier">lowest_salary_dev</span> = <span class="ruby-constant">DeveloperOrderedBySalary</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-value">:poor_jamis</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">lowest_salary_dev</span>, <span class="ruby-constant">DeveloperOrderedBySalary</span>.<span class="ruby-identifier">last</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_include_with_count">
            
              <b>test_default_scope_include_with_count</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_default_scope_include_with_count" name="method-i-test_default_scope_include_with_count" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_include_with_count_source')" id="l_method-i-test_default_scope_include_with_count_source">show</a>
                
              </p>
              <div id="method-i-test_default_scope_include_with_count_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 516</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_include_with_count</span>
  <span class="ruby-identifier">d</span> = <span class="ruby-constant">DeveloperWithIncludes</span>.<span class="ruby-identifier">create!</span>
  <span class="ruby-identifier">d</span>.<span class="ruby-identifier">audit_logs</span>.<span class="ruby-identifier">create!</span> <span class="ruby-value">:message</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;foo&#39;</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-constant">DeveloperWithIncludes</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:audit_logs</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:message</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;foo&#39;</span> }).<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_is_threadsafe">
            
              <b>test_default_scope_is_threadsafe</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_default_scope_is_threadsafe" name="method-i-test_default_scope_is_threadsafe" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_is_threadsafe_source')" id="l_method-i-test_default_scope_is_threadsafe_source">show</a>
                
              </p>
              <div id="method-i-test_default_scope_is_threadsafe_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 523</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_is_threadsafe</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">in_memory_db?</span>
    <span class="ruby-identifier">skip</span> <span class="ruby-string">&quot;in memory db can&#39;t share a db between threads&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">threads</span> = []
  <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-number">1</span>, <span class="ruby-constant">ThreadsafeDeveloper</span>.<span class="ruby-identifier">unscoped</span>.<span class="ruby-identifier">count</span>

  <span class="ruby-identifier">threads</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">current</span>[<span class="ruby-value">:long_default_scope</span>] = <span class="ruby-keyword">true</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-constant">ThreadsafeDeveloper</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">threads</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-constant">ThreadsafeDeveloper</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">threads</span>.<span class="ruby-identifier">each</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:join</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_is_unscoped_on_create">
            
              <b>test_default_scope_is_unscoped_on_create</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_default_scope_is_unscoped_on_create" name="method-i-test_default_scope_is_unscoped_on_create" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_is_unscoped_on_create_source')" id="l_method-i-test_default_scope_is_unscoped_on_create_source">show</a>
                
              </p>
              <div id="method-i-test_default_scope_is_unscoped_on_create_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 371</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_is_unscoped_on_create</span>
  <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">DeveloperCalledJamis</span>.<span class="ruby-identifier">unscoped</span>.<span class="ruby-identifier">create!</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_is_unscoped_on_find">
            
              <b>test_default_scope_is_unscoped_on_find</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_default_scope_is_unscoped_on_find" name="method-i-test_default_scope_is_unscoped_on_find" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_is_unscoped_on_find_source')" id="l_method-i-test_default_scope_is_unscoped_on_find_source">show</a>
                
              </p>
              <div id="method-i-test_default_scope_is_unscoped_on_find_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 366</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_is_unscoped_on_find</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-constant">DeveloperCalledDavid</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">11</span>, <span class="ruby-constant">DeveloperCalledDavid</span>.<span class="ruby-identifier">unscoped</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_order_ignored_by_aggregations">
            
              <b>test_default_scope_order_ignored_by_aggregations</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_default_scope_order_ignored_by_aggregations" name="method-i-test_default_scope_order_ignored_by_aggregations" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_order_ignored_by_aggregations_source')" id="l_method-i-test_default_scope_order_ignored_by_aggregations_source">show</a>
                
              </p>
              <div id="method-i-test_default_scope_order_ignored_by_aggregations_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 505</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_order_ignored_by_aggregations</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">DeveloperOrderedBySalary</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">count</span>, <span class="ruby-constant">DeveloperOrderedBySalary</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_select_ignored_by_aggregations">
            
              <b>test_default_scope_select_ignored_by_aggregations</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_default_scope_select_ignored_by_aggregations" name="method-i-test_default_scope_select_ignored_by_aggregations" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_select_ignored_by_aggregations_source')" id="l_method-i-test_default_scope_select_ignored_by_aggregations_source">show</a>
                
              </p>
              <div id="method-i-test_default_scope_select_ignored_by_aggregations_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 496</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_select_ignored_by_aggregations</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">DeveloperWithSelect</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">count</span>, <span class="ruby-constant">DeveloperWithSelect</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_select_ignored_by_grouped_aggregations">
            
              <b>test_default_scope_select_ignored_by_grouped_aggregations</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_default_scope_select_ignored_by_grouped_aggregations" name="method-i-test_default_scope_select_ignored_by_grouped_aggregations" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_select_ignored_by_grouped_aggregations_source')" id="l_method-i-test_default_scope_select_ignored_by_grouped_aggregations_source">show</a>
                
              </p>
              <div id="method-i-test_default_scope_select_ignored_by_grouped_aggregations_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 500</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_select_ignored_by_grouped_aggregations</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Hash</span>[<span class="ruby-constant">Developer</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">group_by</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:salary</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>.<span class="ruby-identifier">count</span>] }],
               <span class="ruby-constant">DeveloperWithSelect</span>.<span class="ruby-identifier">group</span>(<span class="ruby-value">:salary</span>).<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_with_block">
            
              <b>test_default_scope_with_block</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_default_scope_with_block" name="method-i-test_default_scope_with_block" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_with_block_source')" id="l_method-i-test_default_scope_with_block_source">show</a>
                
              </p>
              <div id="method-i-test_default_scope_with_block_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 358</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_with_block</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">becomes</span>(<span class="ruby-constant">LazyBlockDeveloperCalledDavid</span>)], <span class="ruby-constant">LazyBlockDeveloperCalledDavid</span>.<span class="ruby-identifier">all</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_with_callable">
            
              <b>test_default_scope_with_callable</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_default_scope_with_callable" name="method-i-test_default_scope_with_callable" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_with_callable_source')" id="l_method-i-test_default_scope_with_callable_source">show</a>
                
              </p>
              <div id="method-i-test_default_scope_with_callable_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 362</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_with_callable</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">becomes</span>(<span class="ruby-constant">CallableDeveloperCalledDavid</span>)], <span class="ruby-constant">CallableDeveloperCalledDavid</span>.<span class="ruby-identifier">all</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_with_conditions_hash">
            
              <b>test_default_scope_with_conditions_hash</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_default_scope_with_conditions_hash" name="method-i-test_default_scope_with_conditions_hash" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_with_conditions_hash_source')" id="l_method-i-test_default_scope_with_conditions_hash_source">show</a>
                
              </p>
              <div id="method-i-test_default_scope_with_conditions_hash_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 380</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_with_conditions_hash</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Jamis&#39;</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>, <span class="ruby-constant">DeveloperCalledJamis</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;Jamis&#39;</span>, <span class="ruby-constant">DeveloperCalledJamis</span>.<span class="ruby-identifier">create!</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_with_conditions_string">
            
              <b>test_default_scope_with_conditions_string</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_default_scope_with_conditions_string" name="method-i-test_default_scope_with_conditions_string" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_with_conditions_string_source')" id="l_method-i-test_default_scope_with_conditions_string_source">show</a>
                
              </p>
              <div id="method-i-test_default_scope_with_conditions_string_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 375</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_with_conditions_string</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;David&#39;</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>, <span class="ruby-constant">DeveloperCalledDavid</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">nil</span>, <span class="ruby-constant">DeveloperCalledDavid</span>.<span class="ruby-identifier">create!</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_with_inheritance">
            
              <b>test_default_scope_with_inheritance</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_default_scope_with_inheritance" name="method-i-test_default_scope_with_inheritance" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_with_inheritance_source')" id="l_method-i-test_default_scope_with_inheritance_source">show</a>
                
              </p>
              <div id="method-i-test_default_scope_with_inheritance_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 391</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_with_inheritance</span>
  <span class="ruby-identifier">wheres</span> = <span class="ruby-constant">InheritedPoorDeveloperCalledJamis</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">where_values_hash</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Jamis&quot;</span>, <span class="ruby-identifier">wheres</span>[<span class="ruby-value">:name</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Arel</span>.<span class="ruby-identifier">sql</span>(<span class="ruby-string">&quot;50000&quot;</span>), <span class="ruby-identifier">wheres</span>[<span class="ruby-value">:salary</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_with_lambda">
            
              <b>test_default_scope_with_lambda</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_default_scope_with_lambda" name="method-i-test_default_scope_with_lambda" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_with_lambda_source')" id="l_method-i-test_default_scope_with_lambda_source">show</a>
                
              </p>
              <div id="method-i-test_default_scope_with_lambda_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 354</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_with_lambda</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">becomes</span>(<span class="ruby-constant">LazyLambdaDeveloperCalledDavid</span>)], <span class="ruby-constant">LazyLambdaDeveloperCalledDavid</span>.<span class="ruby-identifier">all</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_with_module_includes">
            
              <b>test_default_scope_with_module_includes</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_default_scope_with_module_includes" name="method-i-test_default_scope_with_module_includes" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_with_module_includes_source')" id="l_method-i-test_default_scope_with_module_includes_source">show</a>
                
              </p>
              <div id="method-i-test_default_scope_with_module_includes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 397</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_with_module_includes</span>
  <span class="ruby-identifier">wheres</span> = <span class="ruby-constant">ModuleIncludedPoorDeveloperCalledJamis</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">where_values_hash</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Jamis&quot;</span>, <span class="ruby-identifier">wheres</span>[<span class="ruby-value">:name</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Arel</span>.<span class="ruby-identifier">sql</span>(<span class="ruby-string">&quot;50000&quot;</span>), <span class="ruby-identifier">wheres</span>[<span class="ruby-value">:salary</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_with_multiple_calls">
            
              <b>test_default_scope_with_multiple_calls</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_default_scope_with_multiple_calls" name="method-i-test_default_scope_with_multiple_calls" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_with_multiple_calls_source')" id="l_method-i-test_default_scope_with_multiple_calls_source">show</a>
                
              </p>
              <div id="method-i-test_default_scope_with_multiple_calls_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 403</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_with_multiple_calls</span>
  <span class="ruby-identifier">wheres</span> = <span class="ruby-constant">MultiplePoorDeveloperCalledJamis</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">where_values_hash</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Jamis&quot;</span>, <span class="ruby-identifier">wheres</span>[<span class="ruby-value">:name</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Arel</span>.<span class="ruby-identifier">sql</span>(<span class="ruby-string">&quot;50000&quot;</span>), <span class="ruby-identifier">wheres</span>[<span class="ruby-value">:salary</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scoping_with_threads">
            
              <b>test_default_scoping_with_threads</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_default_scoping_with_threads" name="method-i-test_default_scoping_with_threads" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scoping_with_threads_source')" id="l_method-i-test_default_scoping_with_threads_source">show</a>
                
              </p>
              <div id="method-i-test_default_scoping_with_threads_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 385</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scoping_with_threads</span>
  <span class="ruby-number">2</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">assert</span> <span class="ruby-constant">DeveloperOrderedBySalary</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_sql</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&#39;salary DESC&#39;</span>) }.<span class="ruby-identifier">join</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_order_after_reorder_combines_orders">
            
              <b>test_order_after_reorder_combines_orders</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_order_after_reorder_combines_orders" name="method-i-test_order_after_reorder_combines_orders" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_order_after_reorder_combines_orders_source')" id="l_method-i-test_order_after_reorder_combines_orders_source">show</a>
                
              </p>
              <div id="method-i-test_order_after_reorder_combines_orders_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 421</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_order_after_reorder_combines_orders</span>
  <span class="ruby-identifier">expected</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id DESC, name DESC&#39;</span>).<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">dev</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">dev</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">id</span>] }
  <span class="ruby-identifier">received</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;name ASC&#39;</span>).<span class="ruby-identifier">reorder</span>(<span class="ruby-string">&#39;name DESC&#39;</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id DESC&#39;</span>).<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">dev</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">dev</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">id</span>] }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">received</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_order_in_default_scope_should_not_prevail">
            
              <b>test_order_in_default_scope_should_not_prevail</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_order_in_default_scope_should_not_prevail" name="method-i-test_order_in_default_scope_should_not_prevail" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_order_in_default_scope_should_not_prevail_source')" id="l_method-i-test_order_in_default_scope_should_not_prevail_source">show</a>
                
              </p>
              <div id="method-i-test_order_in_default_scope_should_not_prevail_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 427</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_order_in_default_scope_should_not_prevail</span>
  <span class="ruby-identifier">expected</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-value">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;salary&#39;</span>).<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">dev</span><span class="ruby-operator">|</span> <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">salary</span> }
  <span class="ruby-identifier">received</span> = <span class="ruby-constant">DeveloperOrderedBySalary</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-value">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;salary&#39;</span>).<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">dev</span><span class="ruby-operator">|</span> <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">salary</span> }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">received</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_reorder_overrides_default_scope_order">
            
              <b>test_reorder_overrides_default_scope_order</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_reorder_overrides_default_scope_order" name="method-i-test_reorder_overrides_default_scope_order" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_reorder_overrides_default_scope_order_source')" id="l_method-i-test_reorder_overrides_default_scope_order_source">show</a>
                
              </p>
              <div id="method-i-test_reorder_overrides_default_scope_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 415</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_reorder_overrides_default_scope_order</span>
  <span class="ruby-identifier">expected</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;name DESC&#39;</span>).<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">dev</span><span class="ruby-operator">|</span> <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">name</span> }
  <span class="ruby-identifier">received</span> = <span class="ruby-constant">DeveloperOrderedBySalary</span>.<span class="ruby-identifier">reorder</span>(<span class="ruby-string">&#39;name DESC&#39;</span>).<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">dev</span><span class="ruby-operator">|</span> <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">name</span> }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">received</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scope_composed_by_limit_and_then_offset_is_equal_to_scope_composed_by_offset_and_then_limit">
            
              <b>test_scope_composed_by_limit_and_then_offset_is_equal_to_scope_composed_by_offset_and_then_limit</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_scope_composed_by_limit_and_then_offset_is_equal_to_scope_composed_by_offset_and_then_limit" name="method-i-test_scope_composed_by_limit_and_then_offset_is_equal_to_scope_composed_by_offset_and_then_limit" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scope_composed_by_limit_and_then_offset_is_equal_to_scope_composed_by_offset_and_then_limit_source')" id="l_method-i-test_scope_composed_by_limit_and_then_offset_is_equal_to_scope_composed_by_offset_and_then_limit_source">show</a>
                
              </p>
              <div id="method-i-test_scope_composed_by_limit_and_then_offset_is_equal_to_scope_composed_by_offset_and_then_limit_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 459</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scope_composed_by_limit_and_then_offset_is_equal_to_scope_composed_by_offset_and_then_limit</span>
  <span class="ruby-identifier">posts_limit_offset</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">3</span>).<span class="ruby-identifier">offset</span>(<span class="ruby-number">2</span>)
  <span class="ruby-identifier">posts_offset_limit</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">offset</span>(<span class="ruby-number">2</span>).<span class="ruby-identifier">limit</span>(<span class="ruby-number">3</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts_limit_offset</span>, <span class="ruby-identifier">posts_offset_limit</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scope_overwrites_default">
            
              <b>test_scope_overwrites_default</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_scope_overwrites_default" name="method-i-test_scope_overwrites_default" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scope_overwrites_default_source')" id="l_method-i-test_scope_overwrites_default_source">show</a>
                
              </p>
              <div id="method-i-test_scope_overwrites_default_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 409</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scope_overwrites_default</span>
  <span class="ruby-identifier">expected</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-value">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39; name DESC, salary DESC&#39;</span>).<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">dev</span><span class="ruby-operator">|</span> <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">name</span> }
  <span class="ruby-identifier">received</span> = <span class="ruby-constant">DeveloperOrderedBySalary</span>.<span class="ruby-identifier">by_name</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">dev</span><span class="ruby-operator">|</span> <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">name</span> }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">received</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_unscoped_with_named_scope_should_not_have_default_scope">
            
              <b>test_unscoped_with_named_scope_should_not_have_default_scope</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_unscoped_with_named_scope_should_not_have_default_scope" name="method-i-test_unscoped_with_named_scope_should_not_have_default_scope" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_unscoped_with_named_scope_should_not_have_default_scope_source')" id="l_method-i-test_unscoped_with_named_scope_should_not_have_default_scope_source">show</a>
                
              </p>
              <div id="method-i-test_unscoped_with_named_scope_should_not_have_default_scope_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 489</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_unscoped_with_named_scope_should_not_have_default_scope</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-constant">DeveloperCalledJamis</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-value">:poor_jamis</span>).<span class="ruby-identifier">id</span>)], <span class="ruby-constant">DeveloperCalledJamis</span>.<span class="ruby-identifier">poor</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-constant">DeveloperCalledJamis</span>.<span class="ruby-identifier">unscoped</span>.<span class="ruby-identifier">poor</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">becomes</span>(<span class="ruby-constant">DeveloperCalledJamis</span>))
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">10</span>, <span class="ruby-constant">DeveloperCalledJamis</span>.<span class="ruby-identifier">unscoped</span>.<span class="ruby-identifier">poor</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_where_attribute">
            
              <b>test_where_attribute</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_where_attribute" name="method-i-test_where_attribute" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_where_attribute_source')" id="l_method-i-test_where_attribute_source">show</a>
                
              </p>
              <div id="method-i-test_where_attribute_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 448</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_where_attribute</span>
  <span class="ruby-identifier">aaron</span> = <span class="ruby-constant">PoorDeveloperCalledJamis</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:salary</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">20</span>).<span class="ruby-identifier">new</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Aaron&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">20</span>, <span class="ruby-identifier">aaron</span>.<span class="ruby-identifier">salary</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;Aaron&#39;</span>, <span class="ruby-identifier">aaron</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_where_attribute_merge">
            
              <b>test_where_attribute_merge</b>()
            
            <a href="../classes/DefaultScopingTest.html#method-i-test_where_attribute_merge" name="method-i-test_where_attribute_merge" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_where_attribute_merge_source')" id="l_method-i-test_where_attribute_merge_source">show</a>
                
              </p>
              <div id="method-i-test_where_attribute_merge_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/cases/relation_scoping_test.rb, line 454</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_where_attribute_merge</span>
  <span class="ruby-identifier">aaron</span> = <span class="ruby-constant">PoorDeveloperCalledJamis</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;foo&#39;</span>).<span class="ruby-identifier">new</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Aaron&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;Aaron&#39;</span>, <span class="ruby-identifier">aaron</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>

    </div>
  </body>
</html>    